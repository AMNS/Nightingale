NIGHTINGALE CHANGES (in DAB's current version and GitHub repository)
March 2013 to Present

Most of the files in my Nightingale Carbon code base have last modification dates of
April or May 2012; a few files are 2 June 2012, and it looks like that's the last source
code I share with David Gottlieb's AMNS version. This document describes all changes to
the AMNF code base since then, the earliest of which are dated 4 March 2013.  --DAB


March 2013 - ??

* CoreMidiUtils.cp: make DebugPrintf output more readable.
* Removed messages in log output for every note (or Sync?) played, e.g.:
      pL=1461: rect.l=288,r=294 paper.l=-20860,r=-20248
	The huge number of those messages overwhelmed everything else in the log. Affects
	MIDIPlay.cp: #define PLDEBUG as 0.
* Fixed a horrible and very confusing kludge for turning notehead graphs off and on that
	resulted in measures often being respaced far too widely when Show Duration Problems
	was on. Added #define for NOTEHEAD_GRAPH_WIDTH; made doNoteheadGraphs a global.
	Affects defs.h, vars.h, DrawNRGR, InitNightingale, SpaceTime.
* Initialize.cp: display most CNFG field values & all errors detected in them in log
	file; if config.whichMIDI is illegal, set it to a legal value (like most other
	fields).
* SpaceHighLevel.cp: improve debug print output for respacing.
* Increased the minimum legal value of config.lineLW from 1 to 5.
* Fixed bug: In the declaration of the Configuration struct, the _noteScanEpsXD_ field
	had somehow been deleted, resulting in misalignment of fields read in, nonsensical
	complaints about illegal CNFG values, ledger lines too long, etc. Affects
	applicationTypes.h .
* Debug output for playback is excessive; disable some. Affects MIDIPlay.cp: #define
	CMDEBUG as 0.
* Remove code to check expiration date. Affects InitNightingale.cp .

-----------------------------------------------------------------------------

March-June 2013

* Change max. tempo from 600 to 1200 BPM. Affects defs.h

* Print status of reading Prefs file, checking CNFG, etc. Affects Initialize.cp

* Advance expiration date by a year. Affects InitNightingale.cp

* Don't print info on every Sync as it's played. Affects MIDIPlay.cp

* Display values of all CNFG fields in log; if any are bad, list all bad ones in error
message. Affects Initialize.cp

* Fix "Respace sometimes leaves way too much space, especially after a dotted
note/chord" bug. Affects vars.h; DrawNRGR.c, InitNightingale.c, SpaceTime.c: add global
<doNoteheadGraphs> to say whether to display noteheads as tiny graphs; defs.h:
declaration of <NOTEHEAD_GRAPH_WIDTH>.

* Minor cleanup. Affects SpaceHighLevel.c; DrawUtils.cp: DrawMChar: removed #if'd-out
code

-----------------------------------------------------------------------------

mid-Aug. - Nov. 2013

* Add to QuickChange "Set tempo M.M. visibility to visible/invisible". Affects .rsrc:
add "M.M. visibility" to Tempo popup; SetUtils.c: add SetSelTempoVisible; SetCommand.c:
improve description of how to add features; various.

* DrawObject.cp: comment out DebugPrintf(s).

-------------------------------------------------------------------------------

23 Mar.- 5 Apr. 2015

* Get rid of the nonsensical statement about duration problems Score Info always gives
following its correct statement about duration problems. Affects ScoreInfo.c:
ScoreInfo(): remove two redundant lines of code just before call to HasMidiMap().

* Changes to Nightingale.rsrc:
	* Change "Midi" to "MIDI" in the "Midi Map" menu command, the MIDI Map dialog, and
		several error messages
	* Reduce size of the "MIDI Modifier Effects" dialog
	* Reduce size of the "Change Dynamic To" dialog
	* Remove phony politeness -- the word "Please" -- from various dialogs

* Increase max. play duration allowed in Set Duration dialog from 300% to 500%, mostly
to handle better the "logical 8th note with half-note head" situation (as in Brahms
piano music). NB: This doesn't help if the situation is "logical duration shorter than
8th note with half-note head", but that seems to be much less common. Affects .rsrc:
STR# 240; DialogsEditor.cp.

* Fix bug in Debug output: Debug Check incorrectly complains about (most? all?)
initial Keysigs of systems with no sharps/flats that their objRects are "GARBAGE
(UNSELECTABLE)". Affects DebugUtils.c: DCheckNode.

-------------------------------------------------------------------------------

11 May - 14 June 2015

* Add a "Relative Playback Speed..." command to the Play/Rec menu: it sets playback
tempi to a percentage of the "correct" (marked) tempos. Make its keyboard shortcut
command-8. (All letters and all other digits are already taken.) Set the shortcut for
Instrument MIDI Settings back to option-command-M. Affects .rsrc: STR# 240;
NightTemplates.h, NResourceID.h, vars.h, InitNightingale, Menu, MIDIDialogs, MIDIPlay.

* Change the default type for Save PostScript from "EPSF for one page" to "PostScript
text for entire file". Affects CarbonPrinting.cp .

* Change two error messages saying a problem is "probably" because of insufficient
memory to "perhaps" because of insufficient memory. Affects .rsrc: STR# 228.

* Fix bug: the channel and patch number in the Instrument settings dialog (from Master
Page) is initialized with illegal values instead of the instrument's current channel and
patch number. Affects InstrDialog.cp: InstrDialog().

* Add error check for patch no. in the Instrument settings dialog. Affects
InstrDialog.cp: InstrDialog().

* Correct wording of an error message from the Instrument settings dialog. Affects
.rsrc: STR# 265.

-------------------------------------------------------------------------------

22 July - 12 August

Increase the default window width, which is ridiculously narrow on a typical modern
display. Affects .rsrc: in WIND 2000, change 620 to 690. (This is still pretty narrow,
but just right for one letter-size page at 100% magnification; if the window is any
wider, it'll show a fraction of a second page, screwing up automatic page turning on
playback.)

Do debug printing for the Import MIDI File command if the shift & control keys are down;
minor cleanup. Affects MIDIFOpen.cp.

-------------------------------------------------------------------------------

30 August - 9 Sept.

Decrease the height of the "Change modifier" and "Add this modifier..." dialogs;
change wording of the latter from "notes" to "notes/rests". Affects .rsrc.

Change keyboard shortcut for Relative Playback Speed from command-8 (which was already
taken by Create Octave Sign!) to shift-command-0; make its dialog slightly wider; make
the MIDI Modifier Effects dialog slightly smaller. Affects .rsrc.

-------------------------------------------------------------------------------

12 - 16 Sept.

Fix bug (Issue #24) in MIDI file export where tempo changes after the first few are
often ignored. Affects MIDIPlay.cp: PlaySequence().

MIDIPlay.cp: Change most instances of "Midi" in function names to "MIDI"; improve
comments; minor cleanup.

MIDIFOpen.cp: In Debug prints for TEMPO metaevents, add "(TEMPO)"; rename the two
versions of GetRelObj (with different calling sequences: this assumes a C++ compiler,
a bad idea) to GetTempoRelObj and GetCtrlRelObj; clean up code.

MIDIFSave.cp: Clarify DebugPrintf's; warn (via DebugPrintf) if tempo change is at the
same time as a previous tempo change; minor cleanup.

-------------------------------------------------------------------------------

17 - 30 Sept.

Add an "Expanded" option to the text entry and Define Text Styles dialogs. Affects
.rsrc; defs.h; DrawObject, StringUtils, TextDialog.

StringToolbox.cp: minor cleanup.

MIDIPlay.cp: Change more instances of "Midi" in function names to "MIDI".

-------------------------------------------------------------------------------

2 - 4 October

Integrate my codebase with the codebase in the AMNS/Nightingale GitHub repository, which
dates from late June 2012. Integrated ca. 7 .h's and 19 .cp's, but -- as a result of
Geoff's large-scale cruft removal in 2012 -- almost all files changed.

Update/simplify About box. Affects About.cp, .rsrc: DLOG 451.

Change version number from 5.4 to 5.5! Affects Info.plist.

-------------------------------------------------------------------------------

27 Sept. - 18 Oct.

Add a "Mute Part" command to the Play/Rec menu; notes for the muted part will neither
be played nor written to an exported MIDI file. (Issue #26) Affects .rsrc; applicationTypes.h,
MIDIGeneral.h, NightTemplates.h, NResourceID.h; Documents, Menu, MIDIDialogs, MIDIPlay,
MIDIFSave, MIDIUtils, Part.

In code to display config fields: add _musicFontID_; rearrange to come closer to the
order of declarations; minor cleanup. Affects applicationTypes.h; Initialize.

PS_Stdio: clarify comments; minor cleanup.

Make Debug Check's checking for "SYSTEM AT xxx RECT PAST RIGHT MARGIN" less strict.
Affects DebugUtils.

-------------------------------------------------------------------------------

20 - 26 Oct.

Add to the config fields displayed _fastScreenSlurs_ & _enclWidthOffset_; clarify
comments; minor cleanup. Affects Initialize.

Clarify a comment. Affects DebugUtils.

Tweak the Info dialog for notes/rests and the one for most other symbols (DLOGs 596 and
598) to make them more readable. Affects .rsrc.

-------------------------------------------------------------------------------

27-28 Oct.			======== NIGHTINGALE 5.5 (28 Oct. 2015) ========

Fix bug: ExpandString() doesn't check for excessively long strings correctly. Affects
StringUtils.

Make the "expanded" option for regular text strings independent of the style instead of
part of the style definition; minor cleanup. Affects .rsrc; Browser, Check, DrawObject,
Insert, InsNew, InsNew.h, MIDIFOpen, NightTemplates.h, NTypes.h, TextDialog. NB: This
option is not entirely backwards compatible: some text in some old scores now comes out
(incorrectly) as "expanded" -- I don't know why.

Add an "expanded" option for text in tempo marks; minor cleanup. Affects .rsrc; Browser,
Check, DialogsEditor, DrawObject, Insert, InsNew, InsNew.h, MIDIFOpen, NightTemplates.h,
NTypes.h.


=======================================================================================


3-16 Nov.

Further tweak the Info dialog for notes/rests and the one for most other symbols (DLOGs
596 and 598) to make them more readable. Affects .rsrc; InfoDialog.

Clarify Browser display of the voice table. Affects Browser.

Preliminary work towards letting user say "when respacing, ignore the chord this note
belongs to". Affects .rsrc; Browser, InfoDialog, Objects, SpaceHighLevel, SpaceTime,
VoiceNumbers, NightTemplates.h, NTypes.h, vars.h.

Browser, InfoDialog, SpaceHighLevel, SpaceTime, VoiceNumbers, NTypes.h, vars.h: minor
cleanup.

Fix bug: when values are changed in many fields of the Sync Info and General Info
dialogs (DLOGs 596 and 598), the chars. for the new values are truncated because they
extend slightly below the boxes they're shown in. Affects .rsrc .

Tweak the Extended Info dialog (used for text strings, octave signs, and tuplets) to
make it more reaable. Affects .rsrc.

Display the tempo in effect in the Context window. Affects .rsrc; Browser.

-------------------------------------------------------------------------------

17-26 Nov.

Add staff no. to the Debug messages about note or grace note in another part's voice.
Affects Debug2Utils.

Remove useless #ifdef's; minor cleanup. Affects MIDIPlay, Debug.h, NTypes.h.

Fix bug: in the Sync Info dialog and the General Info dialog (used for measures/barlines
and text) some labels are truncated into unclarity; in Sync Info, the value of the Onset
Time is truncated into incorrectness. Affects .rsrc.

Make the Context window interpret dynamic level -- e.g., it now shows "3 (pp)", not
just "3". Affects Browser.

In error conditions, explain via DebugPrintf; minor cleanup. Affects Browser.

-------------------------------------------------------------------------------

28 Nov.

CarbonPrinting: minor cleanup.

Clarify error message for attempt to zoom in further than the Screen Page Layout
allows. Affects .rsrc .

-------------------------------------------------------------------------------

29 Nov. - 28 Dec.

Replace calls to DebugPrintf() -- which was simply #define'd as printf -- with calls to
a new function LogPrintf(), which uses syslog(Section 3) so messages go to the system
log and (optionally, via compile-time option) also to stderr (which appears in Xcode's
Run Log window if Nightingale is running inside Xcode). Affects DebugUtils.h; about 60
files.

In the project file, put precomp headers in proper alphabetical order.

Minor cleanup. Affects many files.

Make the Browser window interpret dynamic level for Dynamics and Measures-- e.g., it
now shows "3 (pp)", not just "3". Affects Browser.

On MIDI playback, if multiple notes are simultaneously playing the same note number on
the same channel but end at different times, either hold the note till the last one ends
or (via compile-time option, "#define MULTNOTES_PLAYMAXDUR") stop playing that note when
the first one ends, as Ngale has always done. (Issue #30) Affects MIDIUtils;
MIDIGeneral.h.

-------------------------------------------------------------------------------

28-31 Dec.

Add control (via compile-time option, in global variable _unisonsOK_) of whether
Nightingale complains about unisons (whether perfect or augmented) in a chord, (1)
when an attempt to create one is made and (2) in Debug command output. Affects vars.h;
Debug2Utils, InitNightingale, InsNew.

Minor cleanup; improve error checking slightly. Affects .rsrc; Context, Initialize,
MIDIPlay, Objects.

Fix bug: Double Selection often fails to update context in following objects correctly.
Affects Double.

Have Debug skip error messages for inconsistent links in beams if rests are present.

Remove unused parameter to EFixContForDynamic(). Affects Context.h; Context, Double,
MergeUtils, MoveUpDown.

Update version number in About box to 5.6b1. Affects info.plist .

-------------------------------------------------------------------------------

2 - 10 Jan. 2016

Change the name of the Preferences file to "Nightingale AMNF Prefs". Affects .rsrc;
VersionStrings.h; Initialize.

Fix bug: the MIDI driver code in the default CNFG resource (used when creating a new
"Nightingale AMNF Prefs" file) is illegal. Affects .rsrc .

In Browser, improve display of the voice-mapping table. Affects Browser.

Add hack code to swap staves in an existing score; it doesn't work for the intended
purpose and it's #ifdef'd out, but it might be useful with a simpler score.

Make Debug stop complaining about the first Sync of a measure in the clipboard not
being at time zero for the measure; make it stop complaining about valid bboxes of
final measures of right-justified systems. Affects DebugDisplay, DebugUtils.

Minor cleanup. Affects defs.h; Browser, DebugDisplay, DebugUtils, DrawObject, File,
Initialize, SpaceHighLevel, VoiceNumbers.

-------------------------------------------------------------------------------

11-14 Jan.			==== NIGHTINGALE 5.6b1 ====

Convert files encoded in Mac OS Roman to UTF-8; replace "sustain on" char. in code
with 0xA1 (its codepoint in Sonata). Affects DrawObject, Menu, DebugUtils.

Convert file with CRLF line endings to Unix. Affects defs.h.

Add a _friendly_ parameter to NameGraphicType() as in NameHeapType() & replace
inline code in BrowseGraphic() with a call to NameGraphicType. Affects Browser,
InfoDialog, UIFUtils.

Minor cleanup. Affects Browser, Double, InfoDialog, UIFUtils.

===============================================================================

18 - 3 Feb.

Change some default CNFG & other settings: "Default staff rastral size" (1) from 1
to 5; "Screen layout..." from vertical to horizontal; in MIDI Modifier values, increase
velocity offset for normal accent (>) from 30 to 40. Affects .rsrc.

Update version number in About box to 5.6b2. Affects info.plist .

Rename VoiceNumbers.cp to VoiceTable.cp.

Alphabetize precomp headers in the Xcode project.

When a (non-hairpin) dynamic is double-clicked, hilight its attachment point, as with
text graphics and tempo marks. Affects Check.c.

For tremolo slashes, reduce the slope considerably and the width slightly. Affects
DrawNRGR.

Make the "Can't find Prefs file: creating a new one" message stay on the screen longer.
Affects Initialize.

Clarify comments; minor (but in Initialize, not so minor!) cleanup. Affects defs.h,
Check.c, DrawNRGR, Initialize, UIFUtils.

Update long version no. to 5.6. Affects info.plist.

-------------------------------------------------------------------------------

5 Feb.			==== NIGHTINGALE 5.6b2 ====

Clarify comments; minor cleanup. Affects Error, Insert.

===============================================================================

9-17 Feb.

Improve Debug output format for readability; minor cleanup. Affects DebugDisplay.

Move tremolo slashes on upstemmed notes slightly to the right so they're centered
around the notes' stems. Affects DrawNRGR.

Minor cleanup. Affects DebugDisplay, DrawHighLvel, DrawNRGR, DrawObject.

Change version no. to 5.6b3. Affects .rsrc, Info.plist.

Display four more CNFG field values in log. Affects Initialize.

Add units to _tempoMarkHGap_ in the CNFG Resorcerer template. Affects .rsrc.

Rename SPACE objects to SPACER. Affects MemMacros.h, NTypes.h, vars.h, and
about 40 C files.

-------------------------------------------------------------------------------

25-26 Feb.			==== NIGHTINGALE 5.6b3 ====

Add to Debug Check a check for Measures of zero width that nonetheless contain
something. Affects DebugUtils.

===============================================================================

27-29 Feb.

Change the name of the OCTAVA object to OTTAVA; change comments, identifiers, etc.
accordingly. Affects about 70 files.

Update version number in About box to 5.6b4. Affects info.plist .

Restore mysteriously lost code changes; minor changes. Affects DebugUtils.

-------------------------------------------------------------------------------

2-7 Mar.

Improve feedback on screen font availability; minor cleanup. Affects InitNightinale.

Make the Browser & Context commands show clef type as string as well as code. Affects
Browser.

Fix bug: On PostScript output, piano pedal up and down symbols are unintelligible
because they're not drawn in a music font.

Add code to LogPrintf() to make it raise the level of messages below a given threshhold
before calling syslog(); this is to work around the odd fact that on my G5, messages
below LOG_NOTICE never go into the log, regardless of setlogmask(().

Make the Empty Measures command set its default measure range from the selection.
Affects Menu.

Minor cleanup. Affects DrawObject, MeasFill, Menu.

-------------------------------------------------------------------------------

8-11 Mar.			       ==== NIGHTINGALE 5.6b4 ====

The Score Info dialog is larger, and it now reports how many empty measures the score
contains and the measure no. of the first. Affects NightTemplates.h, MeasFill,
ScoreInfo; .rsrc: enlarge DLOG & add strings to STR#.

Change CNFG defaults:
	* In tempo/metronome marks, increase space between the tempo char. string and the
		note beginning the metronome mark from 0 eighth-spaces to 4
	* Increase "Additional top margin on 1st page" from 0 to 36 pts
	* Decrease "Min. space between lyrics" from 6 eighth-spaces to 4

Minor cleanup. Affects PitchCmds, ScoreInfo.

===============================================================================

21-25 Mar.

Update version number in About box to 5.6b5. Affects info.plist .

The default sizes of the three memory values in the CNFG were ridiculously low; increase
them by a factor of 10. (They're probably meaningless under any OS Ngale 5.x runs on,
but just in case.)

Fix bug: for tempo/metronome marks where tempo isn't given, the metronome mark is drawn
slightly to the right of where it should be. Affects DrawObject.

In feedback for dragging tempo/metronome marks, fix bug: the "expanded" attribute is
ignored; improve spacing between tempo and metronome mark (it still isn't quite
correct). Affects Dragging.

Rename the _string_ field of the Graphic object to _strOffset_. Affects NTypes.h; about
15 C files.

In the Context dialog, show the last previous Graphic for the staff, if there is one.
Affects Context.

Minor cleanup. Affects Dragging, Context, etc.

-------------------------------------------------------------------------------

27 Mar.-9 Apr.

Rename the string and _metroStr_ fields of the Tempo object to _strOffset_ and
_metroStrOffset_. Rename _headerStr_ and _footerStr_ to  _headerStrOffset_ and
_footerStrOffset_. Affects FileConversion.h, NTypes.h, MemMacros.h; about 10 C files.

The Score Info dialog now reports how many out-of-range notes the score contains and
the measure no. of the first. Affects ScoreInfo; .rsrc: add strings to STR#.

Fix bug: In a C score ("Transpose MIDI" unchecked), some notes are incorrectly considered
out of range because we were assuming the notation was transposed. Affects ScoreInfo,
PitchCmds.

Make the default top of the cello, double bass and trumpet ranges less conservative; the
default bottom of the double bass range less conservative; and the default top of the
bassoon range _more_ conservative. Change the heading on the Instrument dialog from
"Transposition and Range" to "Transposition and Written Range". Affects .rsrc.

Minor cleanup. Affects About, DrawObject, Extract, ExtractHighLevel, HeaderFooterDialog,
InstrDialog, Menu, MIDIFSave, MIDIUtils, ScoreInfo.

-------------------------------------------------------------------------------

11-13 Apr.

Get the string "selected parts" from a resource instead of compiling it in. Affects
.rsrc; ExtractHighLevel.

Move definition of FILENAME_MAXLEN to a header; use it in SaveNotelist() as well as
previous use. Affects NLimits.h; NotelistSave.

Move definitions of four limits from defs.h to NLimits.h.

Minor cleanup. Affects NLimits.h, Reconstruct.h; ExtractHighLevel, File, Menu,
MergeUtils, NotelistSave, Reconstruct, SelUtils.

-------------------------------------------------------------------------------

14 Apr. - 5 May			       ==== NIGHTINGALE 5.6b5 ====

Get with 21st-century conventions by taking filename extensions seriously: put the
part name in default filenames of extracted parts before the dot instead of at the
very end. Affects NightTemplates.h; ExtractHighLevel, StringUtils.

Fix bug: For first measure with an out-of-range note, Score Info often gives the wrong
number. Affects ScoreInfo.

Reword a few of Score Info's messages. Affects .rsrc; ScoreInfo.

Replace corrupted (empty) Nightingale 2004 Help file with (what I think is) the correct
version.

Re-organize Tech Notes, and update the file NightingaleTechNotes.txt .

Replace the commercially-oriented header on ca. 160 files referring to Advanced Music
Notation Systems with a kinder, gentler one referring to Avian Music Notation
Foundation; change the splash screen to name Avian Music Notation Foundation instead of
Adept Music Notation Solutions.

Minor cleanup. Affects MemMacros.h; DebugHighLevel, DebugUtils, DrawNRGR, DrawObject,
Extract, File, MasterPage, StringUtils, and a few others.

===============================================================================

9 - 31 May

Update version number in About box to 5.6b6. Affects info.plist .

Show the measure's time (in ticks from the beginning of the score) in the Info dialog
for measures. Affects .rsrc; InfoDialog.

Pull a new header for notation style definitions, style.h, out of defs.h. Also affects
Nightingale_Prefix.pch.

Try to keep default filenames of extracted parts from exceeding the (Mac Classic)
length limit of 31 chars. Affects ExtractHighLevel.

Don't let the default respacing percent in the Extract Parts dialog exceed 100. Affects
ExtractHighLevel.

Increase default max. no. of documents (in the CNFG resource) from 20 to 30; this should
be helpful mostly to make extracting parts from a large score more convenient. Affects
.rsrc.

Have all XXXAdvise() and XXXInform() functions call LogPrintf(), so something (including
the alert ID but not the actual message) appears in the system log.

Move LogPrintf and related functions from Utility to UIFUtils.

Remove #ifdef'd-out code & comments re "Mackey's disease". Affects Event, File, Menu.

Minor cleanup. Affects CarbonPrinting, DialogsEditor, DrawNRGR, InfoDialog, Initialize,
MasterPage.

-------------------------------------------------------------------------------

2-9 June

Make error checking of CNFG values count just one error each for page margin and page
number margin, no matter how many of their fields are out of bounds. Affects Initialize.

Show page header and footer in the Browser window; make the window wider and taller to
accomodate them. Affects .rsrc; Browser.

When parts are extracted, they now inherit page headers and footers from the score.

Move DelAddRedAccs from CFilesBoth to CFilesEditor.

When a file is opened normally or read-only via menu command, or opened via Apple Event,
send a message saying so to the log file. Affects Event, Menu.

When extracting parts, if in a series of TEMPO objects there's more than one relevant to
a part, we assume they're identical (e.g., for an orchestra score where the tempo mark
appears above the top staff and somewhere in the middle), so we extract only the first
one. Affects Extract.

Rename screen font files so all have the extension .bmap .

Rename the TEMPO object _tempo_ field to _tempoMM_; rename the Config _defaultTempo_
to _defaultTempoMM_. Affects ApplicationTypes.h, NTypes.h; Browser, Check, File, FileInput,
Initialize, Insert, InsNew, MIDIFOpen, MIDIFSave, MIDIRecord, MIDIUtils, NotelistParse.

Add to tempo/metronome mark dialog an option to have no M.M., so it has no effect on
playback timing. (Issue #84) Affects MemMacros.h; Browser, Check, DialogsEditor, Dragging,
DrawObject, InsNew, MIDIPlay, MIDIRecord, MIDIFSave, MIDIUtils, .rsrc.

Increase minimum legal tempo from 1 to 10 BPM. Affects DialogsEditor.

Minor cleanup. Affects Extract, ExtractHighLevel, HeaderFooterDialog, NTypes.h.

-------------------------------------------------------------------------------

12-14 June

Make the Browser, Context, and Score Info windows wider. Affects .rsrc.

Change inconsistent definitions of min. tempo M.M. to MIN_BPM (currently 10); rename
MAXBPM to MAX_BPM. Affects NLimits.h; DialogsEditor, Initialize; .rsrc.

Minor cleanup. Affects DialogsEditor.

-------------------------------------------------------------------------------

16 June			    ======== NIGHTINGALE 5.6 (16 June 2016) ========

In the Info dialog for notes and rests, make the Dur field wider, to accomodate values
like "-47" for a 47-bar rest. Affects .rsrc.

Rename the "Transpose MIDI" command to "Transposed Score"; not only is the latter
standard terminology, but it's what the related alert calls the command. Affects .rsrc.

Make the "MIDI Dynamic Prefs" and "Instrument MIDI Settings" dialogs a little prettier.
Affects .rsrc.

===============================================================================

23-24 June

Change version number from 5.6 to 5.7b1. Affects Info.plist.

Fix bug: Paste Merge, Set Duration, and Remove Rhythmic Gaps/Resynchronize give a
strange error message for GRDraws (lines) anywhere in the score, e.g., =>
"FixGRDrawLinks: for 1155, firstObj=1157 or lastObj=1161 isn't a Sync or a GRSync.",
when lastObj is a Measure, which is actually legal. Affects Reconstruct.

Minor cleanup. Affects style.h, DebugUtils, Reconstruct.

-------------------------------------------------------------------------------

26-27 June

Fix problem with Xcode project: Xcode 2.5 (at least) can't save certain source-code
files -- Browser, DebugUtils, Dragging -- because it doesn't know what their
encoding is.

Now that the Browser window is slightly larger, have it show the first 25 voices of
the voice-mapping table instead of 24. Affects Browser.

Have the Debug command check note play durations for "Check standard things", not just
"Check all possible"; fix a bug in its checking that results in complaints about notes
that are really okay. Affects DebugUtils.

Minor cleanup. Affects Browser, Clipboard, DebugUtils, Dragging.

-------------------------------------------------------------------------------

28 - 30 June

Discard alert resources (ALRTs 194 and 255) related to hardware copy protection and
serial numbers. Affects .rsrc; NResources.h.

Rename the Master Page commands "Add Part/Staff" and "Delete Part/Staff" to "Add Parts"
and "Delete Part", respectively. Affects .rsrc.

Pull GetVoiceTableLine() out of ShowVoicePage(). Affects Browser, VoiceTable.

Add to the Debug dialog an option to display the voice table; enlarge the dialog.
Affects .rsrc; DebugHighLevel.

For the "Split Part" command, distinguish between the cases where a default voice is
on one staff other than its "native" staff (may be able to handle it soon) and
where it's on multiple staves (much more difficult; unlikely we'll handle it any time
soon). Affects .rsrc; MPCommands.

Rename Boolean functions PartSel, PartRangeSel, & GroupSel to PartIsSel, PartRangeIsSel,
& GroupIsSel, respectively. Affects MasterPage.h; Event, MasterPage, Menu, MPCommands.

-------------------------------------------------------------------------------

1 - 5 July			       ==== NIGHTINGALE 5.7b1 ====

Make "Frame System Boxes" frame them in blue instead of black. Affects DrawHighLevel.

Improve error messages for the Split Part command. Affects .rsrc; MPCommands.

Minor cleanup. Affects DebugHighLevel, MPCommands.

===============================================================================

7 - 14 July

Change version number from 5.7b1 to 5.7b2. Affects Info.plist.

Fix problem with Xcode project: Xcode 2.5 (at least) can't open DrawObject because it's
damaged UTF-8, and it can't save defs.h because it's confused about its encoding.

Minor cleanup. Affects defs.h; DialogsEditor, DrawNRGR, DrawObject, Dragging,
MPCommands, TextDialog.

-------------------------------------------------------------------------------

17 July

Fixed bug (Issue #77): Trash on screen when Look at One Voice is in use. Affects
DrawUtils.

Minor cleanup. Affects DrawObject, Drawutils.

===============================================================================

19-20 July

Changed version number from 5.7b2 to 5.7b3. Affects Info.plist.

Improve standard (for Add Modifiers) position of the common accent (>). Affects InsNew.

Move FIInsertModNR() FileInput to a more appropriate "home" and rename it
AutoNewModNR(). Affects FileInput, InsNew.

Move two files from project folder CFilesBoth to CFilesEditor. Affects InsNew,
InsNewUtils.

Minor cleanup.

-------------------------------------------------------------------------------

22 July - 6 August			       ==== NIGHTINGALE 5.7b2 ====

Tweak standard (for Add Modifiers) position of circle (natural harmonic) note modifier.
Affects InsNew.

Rename MaxNameWidth() to MaxPartNameWidth(), GetFontIndex() to FontName2Index(). Affects
Utility and about eight others.

Added utility function Pstrlen; changed expressions of the form "if (blah[0])..." to
the far more understandable "if (Pstrlen(blah)>0)..." Affects DrawObject, StringUtils.

Change some instances of "unsigned char *blah[256]" to "Str255 blah". Affects DrawObject.

Add function FontID2Name. Affects Utility.

Rewrite DrawGRAPHIC() and DrawTEMPO() so both call a new function, DrawTextBlock();
other changes to prepare for multiline tempo marks. Affects DrawObject.

Minor cleanup. Affects DrawObject, DrawUtils, FileInput, InfoDialog, MusicFont, PS_Stdio,
Search, Utility.

===============================================================================

8 - 12 August			       ==== NIGHTINGALE 5.7b3 ====

Changed version number from 5.7b3 to 5.7b4. Affects Info.plist.

Add a note about starting new lines to the Tempo/Metronome dialog. Affects .rsrc.

Change expressions referring to "blah[0]" to get the length of a Pascal string to the
far more understandable "Pstrlen(blah)". Affects DialogsEditor, Documents, Dragging,
Undo.

Change some instances of "unsigned char *blah[256]" for Pascal strings to "Str255 blah".
Affects DialogsEditor, Dragging.

Clarify symbol type labels in Get Info dialogs, e.g., say "GRAPHIC: TEXT" instead of
just "TEXT". Affects InfoDialog.

Fix bug: feedback for dragging an expanded text Graphic isn't expanded. Affects
Dragging.

-------------------------------------------------------------------------------

13 - 26 August

Handle multiline tempo marks. Affects defs.h, DrawUtils,h; DialogsEditor, Dragging,
DrawObject, Utility.

Rewrite SDDrawTempo() for readability. Affects Dragging.

Minor cleanup. Affects Draw.h; DialogsEditor, DrawingEdit, DrawObject, DrawUtils,
TextDialog, Utility.

Update README.

-------------------------------------------------------------------------------

1 - 7 Sept.			       ==== NIGHTINGALE 5.7b4 ====

Remove numerous #ifndef PUBLIC_VERSIONs. Affects a bunch of files.

Incorporate Laurie S.'s changes to make Ngale compile with Xcode 7.3. Affects
About, CheckMerge, DrawObject, DurationPopUp, FileInput, NavServices.

In extracted parts, set Left End of Systems for "Other" systems (not the first) to
"No instrument names" and indent to 0. Affects Extract.

Minor cleanup. Affects MemMacros.h; DurationPopUp, ExtractHighLevel, MCaret, MIDIFOCmd,
MIDIRecord, NotelistParse, Objects, Reformat, Transcribe, UIFUtils.

===============================================================================

14 - 15 Sept.

Changed version number from 5.7b4 to 5.7b5. Affects Info.plist.

Minor cleanup. Affects MIDIGeneral.h; CoreMidiUtils, MIDIFSave, MIDIPlay, MIDIUtils,
NewSlur, TrackVMove.

Increase max. no. of tempo changes on playback from 100 to 300; reword error message
for exceeding the limit. Affects .rsrc; MIDIPlay.

-------------------------------------------------------------------------------

19 - 23 Sept.

Bring the Combine Parts dialog layout up to an acceptable level. Affects .rsrc.

Fix bug: if the Pan Settings dialog resource isn't available, Ngale gives the wrong
error message. Affects DialogsEditor.

Clarify the Change Patch dialog; improve its layout and that of the Pan Setting dialog.
Affects .rsrc.

Fix bug (Issue #114): While patch settings properly affect MIDI playback inside Ngale,
they have no effect on MIDI files Ngale writes. Affects MIDIFSave.

Minor cleanup. Affects MIDIGeneral.h; CoreMidiUtils, DebugDisplay, DialogsEditor,
MIDIFOCmd, MIDIFSave, MIDIPlay.

-------------------------------------------------------------------------------

24 - 27 Sept.

Trying to open certain old files that don't have the proper Ngale document icon, and
therefore probably don't have the correct pre-OS X-Finder file type ('SCOR'), by
dropping them on the Ngale program icon, used to just give an incomprehensible error
message and give up; Ngale now gives a meaningful message and it does try to open the
files (and in tests it succeeded). Affects .rsrc; NResource.h; Event.

Move def. of METAEVENT and its subcodes into a header. Affects MIDIGeneral.h; MIDIFOpen,
MIDIFSave.

Minor cleanup and enhancements. Affects MIDIGeneral.h; Documents, File, MIDIFOCmd,
MIDIFOpen, MIDIUtils.

-------------------------------------------------------------------------------

30 Sept. - 11 Oct.

Minor cleanup and enhancements. Affects Ottava.h; Dragging, MIDIFOpen, MIDIFSave,
Ottava, RTRhythmDur.

-------------------------------------------------------------------------------

12 - 15 Oct.			       ==== NIGHTINGALE 5.7b5 ====

Minor cleanup. Affects NightTemplates.h; Initialize, InitNightingale, Insert, Tuplet.

===============================================================================

17 - 20 Oct.

Changed version number from 5.7b5 to 5.7b6. Affects Info.plist.

Implement "nudging" a selected symbol -- note(s)/rest(s), text Graphic, dynamic,
or tempo/metronome mark -- via command-arrow keys. Affects Event. (Issue #119)

Clarify labels and minor cleanup in Get Info dialogs. Affects .rsrc; InfoDialog.

Minor cleanup. Affects Event, Menu.

-------------------------------------------------------------------------------

21 - 27 Oct.

Cleanup: get rid of all references to JG_NOTELIST. Affects compilerFlags.h,
NResourceID.h; Event, Menu, NotelistSave, Select, UIFUtils.

Replace some calls to PStrCopy with Pstrcpy. Affects About, Menu.

Change default staff rastral size for Open Notelist from 2 to 5 so that scores
with many staves are less likely to go off the bottom of the page.

Change all occurrences of _toPostscript_ to _toBitmapPrint_. Affects about
10 files.

Minor cleanup. Affects defs.h; CarbonPrinting, DrawHighLevel, Menu, NotelistConvert.

-------------------------------------------------------------------------------

29 Oct. - 2 Nov.

Add check for multiple Tempo/metronome mark objects at the same point in the score
whose tempo and M.M. strings aren't identical. Affects DebugHighLevel, Debug2Utils.

Update and clarify wording of two error messages that are given upon launching
Nightingale if a copy is already running. Affects .rsrc.

Remove obsolete LogPrintf's. Affects DialogsEditor.

Move NewSlur.cp from folder CFilesBoth to CFilesEditor. Affects Nightingale.xcodeproj.

Minor cleanup. Affects DrawObject, NewSlur.

-------------------------------------------------------------------------------

4-8 Nov.			       ==== NIGHTINGALE 5.7b6 ====

Implement "nudging" slurs/ties via command-arrow keys. Affects Event.

Alphabetize precomp headers. Affects Nightingale.xcodeproj.

In Get Info, show Graphic object subtypes in lower case, and widen the display field:
otherwise long names like "Arpeggio" won't be shown at all. Affects .rsrc; UIFUtils.

Minor cleanup. Affects MemMacros.h, NTypes.h; Event, Ottava, Slurs, SpaceTime.

===============================================================================

9-16 Nov.

Changed version number from 5.7b6 to 5.7b7. Affects Info.plist.

Fix bug in checking for multiple Tempo/metronome mark objects at the same point whose
tempo and M.M. strings aren't identical. For each pair being compared, if both don't
really _have_ tempo strings, skip the check; likewise for M.M strings. Affects
Debug2Utils.

Replace all calls to PStrCopy with Pstrcpy. Affects NightTemplates.h; about 18 C files.

In Notelists, skip writing clefs that are at the beginnings of systems and just for
context setting, the way key signatures have always been handled. Affects NotelistSave.

In Notelists, handle multiple-line tempo marks so as to keep the notelist entry on one
line.

-------------------------------------------------------------------------------

17-19 Nov.

Notelists have always shown styles 1 through 5 in Text graphics correctly, but listed
styles 6 through 9 as unknown; they now shown all styles correctly. Affects NotelistSave.

Clarify code & minor cleanup. Affects Notelist.h, SpaceTime.h; Check, Debug2Utils,
DrawObject, Extract, MIDIFSave, Ottava, Score, ScoreInfo, SpaceTime, TextDialog.

-------------------------------------------------------------------------------

20-23 Nov.

Make "Color Voices" the default for new scores. Affects Documents.

Notelists now give the measure number in Barline (Measure) lines. Affects NotelistSave.

Partial implementation of making Show Duration Problems also show individual staff-
measures that are incomplete. Affects .rsrc; SpaceTime.h, vars.h; DrawObject, Initialize.

Minor cleanup; improve code readability, etc. Affects defs.h, MemMacros.h, Utility.h;
Browser, Debug2Utils, Documents, DragBeam, DrawingEdit, DrawObject, HairpinEdit,
Initialize, Merge, MIDIFSave, RfmtRaw, Score, ScoreInfo, SpaceTime, Utility.

-------------------------------------------------------------------------------

24-28 Nov.			       ==== NIGHTINGALE 5.7b7 ====

Show Duration Problems now shows individual staff-measures that are incomplete as well
as entire measures (across all staves) that disagree with the time signature. Affects
DrawObject.

Make the Debug command check for cautionary time signatures at the end of a system when
there's a change of time signature at the beginning of the next system. Affects
Debug.h; Debug2Utils, DebugHighLevel.

Minor cleanup. Affects Utility.h; Browser, Context, DebugHighLevel, DelRedTimeSigs,
DragGraphic, Utility.

===============================================================================

30 Nov. - 2 Dec.

Changed version number from 5.7b7 to 5.7b8. Affects Info.plist.

Move some notation style parameters and music-font character definitions into the proper
headers. Affects defs.h, style.h; DrawNRGR, DrawUtils, SpaceTime.

Move all "Debug" routines for checking our data structure into DebugUtils, and all
routines for checking musical and music-notation constraints into Debug2Utils. Also
affects Debug.h.

Minor cleanup. Affects DebugHighLevel, Debug2Utils, DebugUtils, SpaceTime, Utility.

-------------------------------------------------------------------------------

9 Dec.

Have the Debug command check individual staff-measures that are incomplete as well
as entire measures (across all staves) that disagree with the time signature. Affects
Debug2Utils.

Minor cleanup. Affects DebugHighLevel, DrawObject, Menu.

-------------------------------------------------------------------------------

19 Dec.

Make default left and right end positions of octave signs extend a bit past the notes.
Affects Ottava.

Reword some references to Sonata in comments to clarify that they really apply to
any music font Nightingale handles. Affects vars.h; ChooseCharDlog, DragGraphic,
DrawUtils, PS_Stdio, TrackVMove, Tuplet, Utility.

Minor cleanup. Affects vars.h; DrawUtils, InitNightingale, Ottava.

-------------------------------------------------------------------------------

21-29 Dec.

In the Get Info dialog for Syncs, move the "T" (Tweaked) flag away from the preceding
text, and widen the dialog a bit. Affects .rsrc.

Fix bug: Select a grace note, Get Info, OK the dialog => Nightingale crashes. Affects
InfoDialog.

Make grace notes a tiny bit smaller, ala Gould's _Behind Bars_. Affects style.h.

Minor cleanup. Affects ChooseCharDlog, InfoDialog, Inval.

-------------------------------------------------------------------------------

7-9 Jan.

Implement "nudging" octave signs and tuplets via command-arrow keys. Affects Event.

Make Debug command messages for multiple time signatures in a measure and for missing
courtesy time signatures more helpful. Affects Debug2Utils.

Minor cleanup. Affects Debug2Utils, Event, MIDIFSave.

-------------------------------------------------------------------------------

10 Jan.			       ==== NIGHTINGALE 5.7b8 ====

Fix bug (Issue #124): Changing a measure rest to a multibar rest, changing the no. of
measures in a multibar rest, etc. should update measure numbers for the remainder of the
score, but they rarely (if ever) do. Affects InfoDialog.

Minor cleanup. Affects DSUtils, InfoDialog, InsNew, InsUtils, Search.

===============================================================================

14-19 Jan.

Changed version number from 5.7b8 to 5.7b9. Affects Info.plist.

Add measure no. to Debug command messages for a few things. Affects DebugUtils.h;
DebugUtils, Debug2Utils.

Use the same "Show Duration Problems" setting for parts as for the score they're
extracted from. Affects Extract.

Minor cleanup. Affects DebugUtils, Debug2Utils (change all "AT %u" to "L%u"),
DrawObject, Extract.

-------------------------------------------------------------------------------

21-25 Jan.

In Notelists, skip writing time signatures that are at the ends of systems and
presumably just "cautionary", similar to (but not quite the same as) the way key
signatures and clefs are handled. Affects NotelistSave.

Fix bug: If Show Duration Problems is checked, Nightingale "complains" about every
multibar rest. Affects DrawObject.

Make "Show Duration Problems" the default for new scores. Affects Documents.

Make Browser display voice no. as "iv=" instead of "v=" to clarify that it's the
internal, not user, voice number. Affects Browser.

Minor cleanup. Affects DrawNRGR, DrawObject, SpaceTime.

-------------------------------------------------------------------------------

26-27 Jan.

Add the measure no. to Debug command messages for a number of things. Affects
DebugUtils.h; DebugUtils, Debug2Utils.

Minor cleanup. Affects DrawNRGR, DebugUtils, Debug2Utils.

-------------------------------------------------------------------------------

29 Jan.-3 Feb.

Enlarge the Import MIDI File "Info" window to show 20 tracks at a time (vs. the previous
16). Affects .rsrc.

Add to the Score Info window the number of note attacks (i.e., sounding notes, as opposed
to written notes). Affects ScoreInfo.

In Export MIDI File code, greatly improve checking for FSWrite errors; rewrite code
that could have produced stale pointers to our HEAPs, hopefully fixing the "Export MIDI
File sometimes crashes or writes files with garbage timing" bug. Affects MIDIFSave.

Minor cleanup. Affects .rsrc; MIDIFOpen, MIDIFSave.

-------------------------------------------------------------------------------

3-5 Feb.

Change copyright notice dates to end in 2017. Affects .rsrc, Info.plist.

In Export MIDI File code, rewrite code that could have produced stale pointers to our
HEAPs, hopefully fixing the "Export MIDI File sometimes crashes or writes files with
garbage timing" bug (Issue #123). Affects MIDIFSave.

Fix bug in feedback for nudging Graphics (normally text) attached to the page. We've
been doing it by redrawing the music area, but that accomplishes nothing because it
almost never contains the Graphic; instead, redraw the entire window. Affects Inval.

Alleviate bug in feedback for drawing and nudging symbols that extend beyond a measure.
We've always done it in most cases (especially for nudging) by redrawing just the
measure the symbol belongs to. Instead, in all cases, after dragging and after each
nudge, redraw the previous Measure as well if it's in the same system; likewise for the
following Measure. This is enough for many cases and at least helps in the others.
Affects Inval.

Minor cleanup. Affects DrawObject, Inval, MIDIFOpen, MIDIFSave, Select.

-------------------------------------------------------------------------------

7 Feb.

Make metronome marks smaller (Issue #131): they've always been larger than the standard
size, and making them smaller is particularly important for parts, where measures tend
to be much narrower and more crowded, etc. Affects Style.h; Dragging, DrawObject.

-------------------------------------------------------------------------------

8-13 Feb.

Reorganize Browser code for readability. Affects Browser.

For code readability, rename the Measure _measureRect_ field -- which effectively just
contains a point giving the size of the entire Measure -- to _measSizeRect_. Affects
MemMacros.h, NTypes.h; about 16 C files.

Minor cleanup. Affects Browser, DebugUtils, SFormatHighLevel.

-------------------------------------------------------------------------------

15-20 Feb.

Add doc->selStartL and ->selEndL to Context display. Affects .rsrc; Browser.

Greatly simplify two InvalXxx() functions. Affects Inval.

Rename _LocateInsertPt_ to _FindInsertPt_ and _MeasRange_ to _GetMeasRange_. Affects
many files.

Minor cleanup. Affects MemMacros.h; Browser, DSUtils, InsUtils.

-------------------------------------------------------------------------------

21 Feb.			       ==== NIGHTINGALE 5.7b9 ====

Move DelSlurTie() from DragUtils to Slurs and rename it DeleteSlurTie(). Affects
Dragging.h, Slurs.h; DragUtils, Slurs.

Minor cleanup, mostly of dragging-related files. Affects MemMacros.h; Dragging,
DragSet, DragUtils, Slurs.

===============================================================================

22-26 Feb.

Changed version number from 5.7b9 to 5.7b10. Affects Info.plist.

Change the default value of config.minMemory from 1 to 200. Not that it matters anymore.
Affects Initialize.

Move #defines for notation style into styles.h. Affects DebugUtils.h; ChordSym,
DrawNRGR, Ottava.

Avoid possibly uninitialized variables. Affects Menu, MIDIFSave.

Minor cleanup. DebugUtils.h; DebugUtils, InstrDialog, Menu, MIDIFSave.

-------------------------------------------------------------------------------

27 Feb.

For consistency, rename defs.h and style.h to Defs.h and Style.h.

Make the "This file uses nn font(s) that aren't available in bit form..." alert
wider. Affects .rsrc.

Reorganize Style.h; rename some #defines for consistency. Affects Style.h; Dragging,
Ottava.

-------------------------------------------------------------------------------

28 Feb.-6 Mar.

Replace (at last!) our timed-loop delay function with something much more accurate
and far more robust against changes of processor speed, even drastic changes. Affects
Utility. (Issue #70)

Make "slop" values more explicit via #defines. Affects DragDynamic, UIFUtils.

Minor cleanup. Affects AccModNRMouse, DragDynamic, Dragging, DragUtils, DrawObject,
DSUtils, InitNightingale, UIFUtils, Utility.

-------------------------------------------------------------------------------

7-9 Mar.

Make SLOP #defines clearer by expanding their names and/or improving comments. Affects
MasterMouse, MasterPage, SFormatHighLevel, UIFUtils.

Other minor cleanup. Affects DragBeam, DSUtils, Insert, InsUtils, MasterMouse, Utility, 

-------------------------------------------------------------------------------

12-15 Mar.			       ==== NIGHTINGALE 5.7b10 ====

Avoid possibly uninitialized variables. Affects FileInput, Utility.

Move page-reformatting functions from MIDIFOpen to Utility. Affects those two & Utility.h.
 
Rename NotelistConvert.c to NotelistOpen.c.

Remove "#define CONVERTSCORE" and "#if CONVERTSCORE"s. Affects Notelist.h, NotelistOpen,
NotelistParse.

For readability, in the enum for score location type, capitalize all values. Affects
Defs.h; MoveUpDown, Reformat, RfmtRaw, Score.

Minor cleanup. Affects Notelist.h; FileInput, MIDIFOpen, NotelistParse, Score, Utility.

===============================================================================

16 Mar.

Changed version number from 5.7b10 to 5.7b11. Affects Info.plist.

Fix bug (Issue #136): Open Notelist often gets as far as "Arranging measures into systems",
then crashes. Affects Score.

Minor cleanup. Affects OpenNotelist, Reformat, Score, SpaceHighLevel.

-------------------------------------------------------------------------------

18 Mar.

Fix bug (Issue #138): Bounding boxes of tempo/metronome marks are too wide if the M.M.
isn't visible. Affects DrawObject.

Avoid possibly uninitialized variables. Affects DrawObject.

Minor cleanup. Affects DrawObject, Menu, MIDIPlay.

-------------------------------------------------------------------------------

19-20 Mar.

Avoid clearly or possibly uninitialized variables. Affects DialogsEditor, MIDIPlay,
Ottava, TextDialog.

Make "slop" values more explicit via #defines. Affects Slurs.

Minor cleanup. Affects MIDIPlay, MIDIUtils, Slurs, Ottava, TextDialog.

-------------------------------------------------------------------------------

21-22 Mar.

Remove checking for availability of Apple Events; since OS 7 of around 20 years ago,
they're always available. Affects ApplicData; Event, Initialize, Main.

Avoid 119 "missing braces" compiler warnings. Affects vars.h.

Minor cleanup. Affects vars.h; Events, Initialize, Main.

-------------------------------------------------------------------------------

23-28 Mar.			       ==== NIGHTINGALE 5.7b11 ====

Change the very misleading name FindStaff() to FindStaffSetSys(). Affects defs.h,
InsUtils.h; EditScore, Insert, InsUtils, NewSlur, Select, SelUtils, 

For clarity, rename the ASLUR field _endpoint_ to _endKnot. Affects MemMacros.h,
NTypes.h; Browser, DebugDisplay, Dragging, DragSet, DrawObject, Event, File, FileInput,
HeapBrowser, Score, Slurs.

Avoid many "missing braces" compiler warnings; other minor cleanup. Affects Dragging,
Error, InsNew, InsUtils, NotelistOpen, Select, Slurs.

===============================================================================

29 Mar.-3 Apr.

Changed version number from 5.7b11 to 5.7b12. Affects Info.plist.

Widen the Browser, Heap Browser, and Context dialogs slightly. Affects .rsrc.

Make "slop" values more explicit via #defines. Affects AccModNRMouse.

Minor cleanup. Affects MemMacros.h; AccModNRMouse, CheckUtils, ScoreInfo, Slurs.

-------------------------------------------------------------------------------

4-5 Apr.

Reorganize MemMacros; rename some MemMacros with Boolean values to clarify their
Boolean-ness. Affects MemMacros.h; CrossSystem, DebugUtils, Delete, File, InsUtils,
Reconstruct, Search, SysPageEdit.

Minor cleanup. Affects MemMacros.h; DebugUtils, InsUtils, Slurs, SysPageEdit.

-------------------------------------------------------------------------------

6-11 Apr.

Add an "Add Cautionary TimeSigs" command (Issue #132). Affects .rsrc, NResourceID.h,
NTypes.h; Menu, Undo.

Replace the "alternate" diagonal light gray shading pattern, indicating one type of
rhythm/time signature conflict, with a rectangular-grid pattern. Affects .rsrc; vars.h;
DrawObject.

Remove some redundant MemMacros and rename others; other minor cleanup. Affects
MemMacros.h; AutoBeam, Context, CrossSystem, DebugUtils, Debug2Utils, Documents,
ExtractHighLevel, Initialize, InsNewUtils, Menu, MIDIFSave, NotelistOpen,
Window.

-------------------------------------------------------------------------------

13-14 Apr.

Rename DelRedTimeSigs.cp => DelAddRedTimeSigs.cp; move AddCautionaryTimeSigs there.
Besides those two files, affects NightTemplates.h; Menu.

Minor cleanup. Affects DSUtils.h; CombineParts, DelAddRedAccs, DSUtils, EssentialTools,
Menu, MPCombineParts, NotelistOpen, ScoreInfo, Windows.

-------------------------------------------------------------------------------

15-19 Apr.

For the "Add Cautionary TimeSigs" command, fix bug with scores of more than one staff;
improve feedback on what it actually did. Affects .rsrc; DelAddRedTimeSigs, Menu.

Prettify the Respace dialog and one ALRT. Affects .rsrc.

Fix bug: Save Notelist should never write cautionary time signatures out, but if one
appears at the end of a page, it _is_ written out. Affects NotelistSave.

Rename a few data-structure utilities to clarify that they're Boolean-valued. Affects
DSUtils.h; DragSet, DSUtils, NewSlur, RfmtRaw.

Minor cleanup. Affects .rsrc; DebugUtils, DSUtils, Extract, Finalize, Menu, MIDIRecUtils,
NotelistSave, PS_Stdio, RTRhythmDur.

-------------------------------------------------------------------------------

20-23 Apr.	======== (FIRST CANDIDATE) NIGHTINGALE 5.7 (23 April 2017) ========

Changed version number from 5.7b12 to 5.7. Affects Info.plist.

The space percentage in the Extract dialog has always been initialized to
doc->spacePercent, but at most 100; instead, we now initialize it to the mean of
100 and doc->spacePercent, but at most 100. Affects ExtractHighLevel.

Added to the Respace dialog a brief comment on how it works. Affects .rsrc. (HOWEVER,
SourceTree doesn't recognize that it's been modified! How to get it into the
repository??)

Renamed two data-structure utilities to clarify they're Boolean-valued; minor cleanup.
Affects .rsrc; DSUtils.h, NResourceID.h; Debug2Utils, DrawObject, DrawUtils, DSUtils,
ExtractHighLevel, FlowInText, Menu, MIDIFSave, Objects, PS_Stdio, ScoreInfo.

25-30 Apr.

Changed version number from 5.7 to 5.8b1. Affects Info.plist.

Get rid of redundant string utility PStrCmp, and replace calls to it with calls to
Pstreql (Issue #78). Affects NightTemplates.h; ChordSym, Documents, FontUtils,
HeaderFooterDialog, Initialize, Preferences, PS_Stdio, Search.

Replaced "TRUE" and "FALSE" with the more standard "true" and "false". Affects style.h;
About, AutoBeam, Beam, Extract, StringUtils, Utility.

Renamed ExpandString() to ExpandPString() and other minor cleanup. Affects
NightTemplates.h, Utility,h; About, AutoBeam, Beam, Dragging, DrawObject, Extract, File,
PS_Stdio, StringUtils, TextDialog, Utility.

-------------------------------------------------------------------------------

30 Apr.-3 May			 ======== NIGHTINGALE 5.7 (3 May 2017) ========


Replaced "TRUE" and "FALSE" with the more standard "true" and "false". Affects
StringUtils.

Minor cleanup. Affects ChordSym, StringUtils.

Redefined version 5.7 by changing the version number from 5.8b1 back to 5.7; this is
desirable because I failed to preserve the 5.7 source (as previously defined) in the
GitHub repository. Affects Info.plist.

===============================================================================

4-5 May

Changed version number from 5.7 to 5.8b1 (again). Affects Info.plist.

Replaced "TRUE" and "FALSE" with the more standard "true" and "false". Affects
AccModNRMouse, BeamBreak, Browser, CheckMerge, Clear, CrossSystem.

Moved HomogenizeSel() from SelUtils to SetUtils; other minor cleanup. Affects SelUtils.h;
AccModNRMouse, BeamBreak, Browser, CheckMerge, Clear, CrossSystem, SelUtils, SetUtils.

-------------------------------------------------------------------------------

6-10 May

Replaced "TRUE" and "FALSE" with the more standard "true" and "false". Affects Check,
Menu, PitchUtils, Tuplet, Undo.

Moved ShellSort() from SelUtils to Utility; other minor cleanup. Affects Utility.h;
SelUtils, Utility.

Fixed bug: Editing text always, and the Untuple command in rare circumstances, leave Undo
for the previous operation in place; now, both operations always just leave Undo
disabled. Affects Check, Tuplet. (An abandoned attempt to implement Undo for editing
text affects NTypes.h; .rsrc; Undo.)

Replaced some "unsigned char [256]" with "Str255" and "unsigned char*" with "StringPtr";
other minor cleanup. Affects Check, ChooseCharDlog, Menu, PitchUtils, TextDialog,
Tuplet, Undo, Utility.

-------------------------------------------------------------------------------

11-13 May

Fixed bug (Issue #146): Editing a tempo/metronome mark leaves the Undo command and data
structures for the previous operation untouched; now, it just leave Undo disabled.
Affects Check.

Replaced "TRUE" and "FALSE" with the more standard "true" and "false". Affects
CheckUtils, ChordSym.

Renamed three data-structure utilities to clarify that they're Boolean-valued. Affects
DSUtils.h; AccModNRMouse, CheckUtils, Clipboard, DSUtils, MergeUtils, MoveUpDown,
Ottava, Score, SFormatHighLevel, Tuplet.

Minor cleanup. Affects About, Check, CheckUtils, Clipboard, DSUtils, MergeUtils,
MoveUpDown, Utility.

-------------------------------------------------------------------------------

17-21 May

Replaced "TRUE" and "FALSE" with the more standard "true" and "false". Affects
CompactVoices, Context, FileInput, Merge.

Moved CompactVoices from folder CFilesBoth to CFilesEditor.

Minor cleanup. Affects CompactVoices, Context, FileInput, Menu, Merge.

-------------------------------------------------------------------------------

25-26 May

Removed code for handling Desk Accessories, which have been essentially obsolete for
the entire 21st century. Affects Menu.

Moved SetUtils from folder CFilesBoth to CFilesEditor, and Clipboard from CFilesEditor
to CFilesBoth.

Replaced "TRUE" and "FALSE" with the more standard "true" and "false". Affects Clipboard,
DSUtils, MoveUpDown.

Minor cleanup. Affects Clipboard, FileInput, Menu, MoveUpDown, SetUtils.

-------------------------------------------------------------------------------

28-31 May

Began implementation of the "Paste as Cue" command. Affects .rsrc, Merge.h; Menu,
Merge.

Reworded the very misleading "Can't merge" warning dialog so it's more accurate. Affects
.rsrc.

Moved AvoidUnisons() and AvoidUnisonsInRange() from MIDIRecUtils to PitchUtils. Also
affects NightTemplates.h, PitchUtils.h.

Reduced the height of shading on the screen indicating individual staves in measures with
duration less than the time signature indicates. Affects DrawObject.

Minor cleanup. Affects Clipboard, DrawObject, DSUtils, Menu, Merge, MergeUtils,
MIDIFOCmd, Objects.

-------------------------------------------------------------------------------

1-7 June

Continued implementation of "Paste as Cue" command. Affects .rsrc, Merge.

Minor cleanup. Affects Merge, MergeUtils.

-------------------------------------------------------------------------------

8-15 June

Continued implementation of "Paste as Cue" command. Affects Merge.

Changed the initial setting of a score's <colorVoices> in new documents from 1 (color
all non-default voices in each part) to 2 (color all voices but voice no. 1 in each
part); clarified (in comments) that difference (which is controlled in an obscure
way by the Look at Voices command). Affects NTypes.h; Documents, DrawUtils, 

Affects Documents, DrawUtils.

We've long been using two versions of DoOpenDocument() with different calling sequences.
This is lovely in C++, and it works with the compilers we've been using, but I don't
think it's so lovely in C, so renamed one to DoOpenDocumentX(). Affects NightTemplates;
Documents, MIDIFOCmd.

Minor cleanup. Affects Reconstruct.h; Browser, Delete, Documents, DrawUtils, Event,
Menu, Merge, MIDIFOCmd, Nodes, Reconstruct.

-------------------------------------------------------------------------------

16-21 June

Swapped the association of voice no. and color for red and green. Affects DrawUtils.

Ngale now knows when a note is a cue note; that info is stored in a formerly ununsed bit
in the ANOTE struct (not that it helps anything quite yet). Affects MemMacros.h,
NTypes.h; Merge.

Partly fixed bug: When notes are transposed or respelled, we always "normalize" the
new notation according to the standard one-voice notation rules even if there are two
voices on the staff. Affects PitchUtils.

Minor cleanup, including renaming FixRespelledVoice() to FixVoiceForPitchChange().
Affects PitchUtils.h; Delete, DrawUtils, Merge, Objects, PitchCmds, PitchUtils, Utility.

-------------------------------------------------------------------------------

22-27 June

Continued implementation of "Paste as Cue" command. Affects .rsrc: fix Edit menu
shortcuts; Merge.

In Browser and Debug Display, we now show the object <spareFlag> as well as the five
flags we've always shown. Affects Browser, DebugDisplay, DebugHighLevel.

Changed the bullet char as marker for the current mode in the Test menu to asterisk;
aside from being needlessly charset dependent (bullet isn't in ASCII), it might be
causing Xcode's repeated problems finding Menu.cp unreadable. Affects Menu.

Minor cleanup. Affects Browser, DebugUtils, MCaret, Menu, Merge, Reconstruct.

-------------------------------------------------------------------------------

28 June-18 July

Continued implementation of "Paste as Cue" command, including setting playback
velocity for cue notes to CUENOTE_VELOCITY regardless of the value in the Note
subobject. Affects MemMacros.h, Reconstruct.h; CoreMidiUtils, Merge, Objects,
Reconstruct.

Gave up on "Paste as Cue" command for the time being: remove user interface for and
disable Paste as Cue. Affects .rsrc; NResourceID.h; Menu.

Renamed the <noteCUE> flag of the aNote struct to <playAsCue>, since -- at least for
the near future -- it affects only MIDI playback. Affects NTypes.h; Browser,
CoreMIDIUtils, Merge, Objects.

Renamed CoreMidiUtils to CoreMIDIUtils.

Minor cleanup. Affects vars.h; Copy, CoreMIDIUtils, Error, Merge, Reconstruct.

-------------------------------------------------------------------------------

19-22 July			       ==== NIGHTINGALE 5.8b1 ====

Renamed utility function IsMultiVoice() to IsSyncMultiVoice(). Affects DSutils.h;
Clipboard, DSUtils, MergeUtils, Ottava, PitchUtils.

Formerly, using the shift key while dragging a slur endpoint constrained it to
move on one axis or the other, but using it while dragging a control point made the
other control point move symmetrically. Now, using the shift key while dragging either
an endpoint or a control point constrains it to move on an axis, and using the option
key while dragging either makes the other move symmetrically. Affects Slurs.

Minor cleanup. Affects DrawDocument, Merge, Reconstruct, Slurs.

===============================================================================

23-31 July

Changed version number from 5.8b1 to 5.8b2. Affects Info.plist.

Renamed file FileInput to InternalInput.

Minor cleanup: Improved debug messages, moved def'n of CS_DELIMITER to a header, etc.
Affects Defs.h; ChordSym, DebugUtils, Debug2Utils, File, InternalInput, Menu,
PitchUtils, Slurs.

-------------------------------------------------------------------------------

2-8 Aug.

Minor cleanup: replaced "TRUE" and "FALSE" with the more standard "true" and "false",
improve error messages, etc. Affects DebugUtils, Debug2Utils, Scroll, UIFUtils.

-------------------------------------------------------------------------------

9-14 Aug.

Minor cleanup. Affects Utility.h; CarbonPrinting, DebugUtils, Utility.

-------------------------------------------------------------------------------

15-20 Aug.

Added to Score Info display of the no. of non-right-justified systems. Affects .rsrc;
ScoreInfo, Utility.

Fixed bug in Score Info: It finds a duration problem with every multibar rest. Affects
ScoreInfo.

Minor cleanup: in Score Info dialog code, remove silly shift-key option, stop
immediately if no score is open; etc. Affects Utility,h; CarbonPrinting, DebugUtils,
InternalInput, ScoreInfo, SpaceTime, Utility.

-------------------------------------------------------------------------------

24-26 Aug.			 ======== NIGHTINGALE 5.8b2 (26 Aug. 2017) ========

Fixed bug (Issue #150): if the score ends with a multibar rest, the no. of measures Score
Info reports is too low. Affects ScoreInfo.

In Score Info, display the score duration in ticks as well as quarters. Affects .rsrc;
ScoreInfo.

Minor cleanup: refactor code slightly, etc. Affects .rsrc; ScoreInfo, SpaceTime.

===============================================================================

27 Aug. - 14 Sept.

Changed version number from 5.8b2 to 5.8b3. Affects Info.plist.

Fixed bug: Flipping the first piece of a cross-system tie/slur doesn't redraw the
affected area (Issue #151). Affects PitchCmds.

Reworded the "Delete stupidly?" alert. Affects .rsrc.

Added a compile-time option to Save Notelist to write out only Measure objects
(barlines) and time signatures; such "skeletons" could be useful for finding the
differences between two versions of a score via direct text comparisons of the notelist
files. Affects NotelistSave.

Renamed NameNodeType() to NameObjType(). Affects UIFUtils.h; Browser, DebugDisplay,
HeapBrowser, InfoDialog, SpaceHighLevel, UIFUtils.

If the shift and option keys are down when the Score Info dialog is opened, the
information it displays is also written to the log file (Issue #155). Affects ScoreInfo.

Minor cleanup: in calls to LogPrintf, changed LOG_NOTICE to LOG_DEBUG or LOG_INFO; made
modifier key usage, especially shift-option more consistent; etc. Affects CoreMidiUtils,
DragDynamic, EssentialTools, File, HeapFileIO, Inval, Menu, MIDIFOCmd, MIDIRecord,
RTRhythmDur, ScoreInfo, SpaceHighLevel, Transcribe, UIFUtils, Utility.

-------------------------------------------------------------------------------

15-19 Sept.			 ======== NIGHTINGALE 5.8b3 (19 Sept. 2017) ========

Save Notelist in "skeleton" mode now writes tempo mark/MMs as well as Measures and
time signatures. Affects NotelistSave.

Save Notelist now writes all tempo mark/MMs attached to a Measure (barline) before the
Measure; previously it did that except for tempo/MMs attached to the invisible barline
beginning a system. Affects NotelistSave.

Made more changes to use of the shift-option modifier keys to increase consistency.
Now (with no exceptions I know of) Nightingale writes additional information to the log
if and only if those modifier keys are down and no others are. Affects DragBeam, GRBeam.

Minor cleanup. Affects DSUtils, NotelistSave.

===============================================================================

30 Sept. - 2 Oct.

Changed version number from 5.8b3 to 5.8b4. Affects Info.plist.

Replaced all occurrences of "TRUE" and "FALSE" with "True" and "False": the latter may
not be more standard, but they fit Nightingale conventions better and lead (I think) to
more readable code. Affects ca. 53 files in CFilesEditor, 52 in CFilesBoth, 6 in
Precomps, 6 in Headers, etc.

Converted some C files with encoding ISO Latin-1 to UTF-8. Affects CarbonStubs, Double,
DrawUtils.

-------------------------------------------------------------------------------

4 - 5 Oct.

Converted some C files with other encodings to UTF-8. Affects About, ChordSym, MIDIFOCmd,
UIFUtils.

Replaced all occurrences of "true" and "false" (other than in comments) with "True" and
"False": the latter are probably less standard, but they fit Nightingale conventions
better and lead (I think) to more readable code. Affects at least 60 files.

-------------------------------------------------------------------------------

12 Oct.

Fixed bug (Issue #156): "Neutral" apostrophes and quote marks in text entered are
garbled. Affects UIFUtils.

Minor cleanup. Affects UIFUtils.h; FlowInText, TEfield, TextDialog, UIFUtils.

-------------------------------------------------------------------------------

16 - 19 Oct.

Minor cleanup: changed unsigned char xxx[256] to Str255 xxx; renamed globals <minVal>
and <maxVal> to <minDlogVal> and <maxDlogVal>; got rid of code relating to GetNextEvent(),
which has been obsolete for 20 years or so; etc. Affects EssentialTools.h, Style.h;
DialogsBoth, DialogsEditor, DialogUtils, EssentialTools, Event, Initialize, MIDIDialogs,
TextDialog.

-------------------------------------------------------------------------------

21 - 23 Oct.

Minor cleanup; change all references to NIL to NULL, get rid of long-obsolete MIDI
cruft, avoid a possible uninitialized variable, etc. Affects Application.h,
InternalInput.h (renamed from FileInput.h), NMiscTypes.h (renamed from
applicationTypes.h), NTypes.h; CarbonStubs, CoreMIDIUtils, NotelistSave, TEField.

-------------------------------------------------------------------------------

25 - 28 Oct.

Changed instances of the shift and control keys together displaying additional
information in the log to our standard of shift and option keys. Affects DrawHighLevel,
MIDIFOpen, MIDIFSave.

Minor cleanup. Affects Beam, DrawHighLevel, GRBeam, MidiMap, MidiMapInfo, MIDIPlay.

-------------------------------------------------------------------------------

31 Oct. - 5 Nov.

In multivoice (>=2 voices on the staff) notation, when notes are transposed or
respelled, don't change stem direction, but try to preserve stem length (Issue #142).
Affects DSUtils.h, DSUtils: add IsContextMultivoice() function; Beam.h; Beam,
PitchCmds,PitchUtils.

Minor cleanup. Affects MergeUtils, MIDIPlay, PitchCmds, PitchUtils, Utility, VoiceTable.

-------------------------------------------------------------------------------

7 - 9 Nov.			 ======== NIGHTINGALE 5.8b4 (9 Nov. 2017) ========

When a new score is opened, write an INFO message to the log. Affects Menu.

Fixed bug (Issue #142): Transposing/respelling ignores multivoice notation rules and
messes up stem directions. We now decide whether notation is multivoice by some rather
complex rules. Affects Beam, DSUtils, PitchUtils.

Minor cleanup: renamed InDataStruct to InObjectList, avoid possibly uninitialized
variables, etc. Affects Beam, Browser, DebugUtils, Delete, MasterPage, Menu, Utility.

===============================================================================

10 - 12 Nov.

Changed version number from 5.8b4 to 5.8b5. Affects Info.plist.

When hairpins are double clicked, they now show their attachment points the way
other dynamics, Graphics, tuplets, etc. do. Affects Check.

Fixed an oversight in the recent fix to Issue #142: When one voice in multivoice
notation has a rest, it's not recognized as indicating multivoice notation. Affects
DSUtils.

Minor cleanup: cleaned the HiliteInsertNode/HiliteTwoNodesOn/HiliteAttPoints mess up
(Issue #57), avoided possible uninitialized variables, etc. Affects NTypes.h,
UIFUtils.h; Check, DialogsEditor, FlowInText, Initialize, Insert, InsUtils, MIDIRecord,
NewSlur, Slurs, UIFUtils.

-------------------------------------------------------------------------------

13 Nov.

Minor cleanup: made voice role constants (now called VCROLE_xxx) independent of
Multivoice dialog item numbers, etc. Affects Multivoice.h; Beam, Check, CombineParts,
DebugUtils, InsNew, InternalInput, MeasFill, MPCombineParts, Multivoice, Objects,
Part, PitchCmds, RhythmDur, SetUtils, Utility, VoiceTable.

-------------------------------------------------------------------------------

14 - 19 Nov.

Fixed bug: Debug Check gives a spurious complaint "SYSTEM RECT EXTENDS INTO RIGHT
MARGIN" if right margin is narrow than the default (Issue #160). Affects DebugUtils.

Clarified the message about adding cautionary time signatures. Affects .rsrc: STR# 279.

Clarified the messages about not being able to save the score the safest or best way
to point out that the file may have been moved. Affects .rsrc: ALRT 380, 385.

Minor cleanup: changed all instances of "while (1)" to "while (True)", avoid possibly
uninitialized variables, etc. Affects DebugUtils, DialogsBoth, FlowInText, Menu,
Multivoice.

-------------------------------------------------------------------------------

19 - 27 Nov.

Clarified the message about being unable to open the Prefs file and the one about being
unable to initialize Nightingale. Affects .rsrc.

Score Info now displays the number of "sets" of symbols as well as individual symbols,
and it displays info in a much more user-friendly way for key signatures, beams, ottavas,
and tuplets. Affects .rsrc; ScoreInfo.

Increased the default distance to the right for the right end of an ottava sign relative
to the last note/chord in the ottava. Affects style.h.

Fixed bug (Issue #162): Feedback while dragging a pedal-down mark shows a 128th note
instead of a pedal-down mark. Affects Dragging.

Minor cleanup: rename GRMIDISustainOn/Off to GRSustainOn/Off, avoid uninitialized
variables, etc. Affects DSUtils.h, NTypes.h, style.h, vars.h; Browser, Check,
CheckUtils, DebugUtils, Debug2Utils, DebugDisplay, Dragging, DrawObject, DSUtils, Event,
File, FlowInText, Insert, InsNew, Inval, MIDIPlay, ScoreInfo, TextDialog, UIFUtils.

-------------------------------------------------------------------------------

28 Nov. - 1 Dec.

Minor cleanup: rename GRSustainOn/Off to GRSusPedalDown/Up; rename FindObject to
FindAndActOnObject; change instances of "Midi" to "MIDI"; etc. Affects CheckUtils.h,
MIDIGeneral.h, MidiMap.h, NTypes.h, vars.h; Browser, Check, CheckUtils, CoreMIDIUtils,
Dragging, DrawObject, InitNightingale, Insert, InsNew, InsUtils, MasterMouse,
MIDIDialogs, MIDIFSave, MIDIPlay, NewSlur, Select, SetCommand, SFormat, UIFUtils.

-------------------------------------------------------------------------------

2 - 5 Dec.

Minor cleanup. Affects DSUtils.h, MemMacros.h; Check, CheckUtils, DSUtils, InsUtils,
MasterMouse, RfmtRaw, Score, SetCommand, SetUtils, SpaceHighLevel.

-------------------------------------------------------------------------------

6 - 8 Dec.

Fixed bug (Issue #163): clicking on a barline should select all staves in its group,
but -- notwithstanding the selection hilighting -- it may not, resulting in, e.g.,
setting the type to (or from) repeat bar with the QuickChange command not affecting
all staves in the group. Affects DSUtils.h; Check, DSUtils.

Minor cleanup: rewrote some incredibly confusing code in DrawMEASURE(), etc. Affects
Check, DrawObject, SetUtils.

-------------------------------------------------------------------------------

9 - 16 Dec.			 ======== NIGHTINGALE 5.8b5 (17 Dec. 2017) ========

Move dialog-related routines from EssentialTools to DialogUtils, and other user-
interface-related routines from EssentialTools to UIFUtils; rename EssentialTools to
MiscUtils. Affects DialogUtils.h, MiscUtils.h, UIFUtils.h; DialogUtils, MiscUtils,
UIFUtils.

Minor cleanup: remove commented-out LogPrintf's, #define and use DEBUG_PRINT macro, etc.
Affects Defs.h, ShowFormat.h; Browser, Check, CheckUtils, DelAddRedTimeSigs,
DialogUtils, Double, DrawHighLevel, DrawObject, DrawUtils, DSUtils, EssentialTools,
Event, Extract, ExtractHighLevel, GRBeam, HeapFileIO, InsNew, InstrDialog, InsUtils,
MasterPage, MIDIFOCmd, MIDIFOpen, MIDIFSave, MIDIPlay, MIDIUtils, Score, ScoreInfo,
SelUtils, SFormat, SFormatHighLevel, SpaceHighLevel, SpaceTime, ToolPalette, Transcribe,
UIFUtils.

===============================================================================

17 - 31 Dec.

Changed version number from 5.8b5 to 5.8b6. Affects Info.plist.

Fill Empty Measures now reports (in the log) the number of staff-measures it added
whole rests to (Issue #59). Affects MeasFill, Menu.

Minor cleanup. Affects DialogsBoth, MeasFill, Menu, MiscUtils, MPCommands, Score,
ScoreInfo, SetCommand, UIFUtils.

-------------------------------------------------------------------------------

7 Jan. 2018

Changed the keydown combination to add more detailed debug info to the log file from
shift-option to shift-control. Affects Defs.h.

Minor cleanup: removed all references to TARGET_API_MAC_CARBON_MIDI, etc. Affects
Nightingale.precomp.pch, Defs.h, UIFUtils.h, Utility.h; InitNightingale, MIDIUtils,
TrackVMove, UIFUtils, Utility.

-------------------------------------------------------------------------------

8 Jan.

Minor cleanup: removed all references to TARGET_API_MAC_CARBON_FILEIO, etc. Affects
Nightingale.precomp.pch, NightTemplates.h; Documents, Event, Menu, MiscUtils,
NotelistSave, StringToolbox.

-------------------------------------------------------------------------------

9 - 10 Jan.

Minor cleanup: removed all references to TARGET_API_MAC_CARBON (Issue #76), etc. Affects
ApplicData.h, CarbonPrinting.h, MiscUtils.h, NMiscTypes.h, NightTemplates.h;
CarbonPrinting, CarbonStubs, Documents, DurationPopUp, Event, File, Initialize, Menu,
MiscUtils, PS_Stdio, StringToolbox, UIFUtils, Utility, Windows; SampleMDEF.

-------------------------------------------------------------------------------

11-16 Jan.

Increased max. no. of tempo changes on playback from 300 to 500. Affects MIDIPlay.

Minor cleanup. Affects NightTemplates.h, OpcodeNightingaleData.h; Menu, MIDIDialogs,
MIDIPlay, MIDIUtils, MusicFont.

-------------------------------------------------------------------------------

17 - 19 Jan.

Renamed the "CoreAudio" folder to "MIDI". Affects the xcodeproj.

Minor cleanup: removed references to and code and resources to handle FreeMIDI, renamed
"OMS..." entities that support Core MIDI to "CM..."; changed LOG_NOTICE-level calls to
LogPrintf to lower or higher levels; etc. Affects Check, CarbonStubs.h, CoreMIDIDefs.h,
FreeMIDICompat.h, InstrDialog.h, MIDICompat.h, MIDIGeneral.h, NMiscTypes.h,
NightTemplates.h, NMiscTypes.h, NResourceID.h, NTypes.h, OpcodeNightingaleData.h,
OMSCompat.h, .rsrc; CarbonPrinting, CarbonStubs, CoreMIDIUtils, DebugDisplay,
DelRedAccs, Documents, Double, Extract, InstrDialog, MIDIDialogs, MIDIFOCmd, MIDIPlay,
MIDIRecord, MIDIRecUtils, MIDIUtils, MusicFont, Objects, PS_Stdio, RhythmDur, SpaceTime.

-------------------------------------------------------------------------------

21 - 24 Jan.

Removed resources for FreeMIDI and OMS and #defines for them: 10 ALRTs, 2 DLOGs, 1 string.
Affects .rsrc; NResource.h.

Hacked the project file (project.pbxproj) so it builds a "Universal" binary instead of
PowerPC-only! But NB: It's pretty much unusable with Intel processors so far, probably
because of Endian issues.

Minor cleanup: removed references to and code and resources to handle OMS and FreeMIDI,
etc. Affects CoreMIDIUtils, MIDIDialogs, RhythmDur.

-------------------------------------------------------------------------------

25 - 26 Jan.

Replaced hardcoded inline constants for checking CNFG fields with #defines. Affects
Initialize.

Enlarged a button in ALRT 190 whose text is wider than the button. Affects .rsrc.

Minor cleanup: removed references to OMS; rename DEBUG_PRINT to DEBUG_SHOW; etc. Affects
ApplicData.h, Defs.h, EndianUtils.h, NMiscTypes.h; CarbonStubs, DrawHighLevel, File,
GRBeam, HeapFileIO, Initialize, MIDIFOCmd, MIDIFOpen, MIDIFSave, MIDIPlay, MIDIUtils, Part,
RTRhythmDur, ScoreInfo, SpaceHighLevel, StringPool, TextDialog, Transcribe.

Built separately for PowerPC and Intel. Affects project.pbxproj (in Nightingale.xcodeproj).

-------------------------------------------------------------------------------

27 - 29 Jan.

Added numerous calls to FIX_END to fix Endian byte order in config fields, for the
benefit of the Intel version. Affects Initialize.

Replaced tests involving the caps-lock key: with SHOW_DEBUG for displaying debug info;
with shift-option for the alternative "Color Voices" method. Affects Check, DelAddRedAccs,
Menu, MIDIRecord, NotelistParse, PS_Stdio.

On startup, we now display more CNFG fields & check them more closely. Affects Initialize.

Minor cleanup. Affects Defs.h, NightTemplates.h, NMiscTypes.h, NResourceID.h,
VersionStrings.h; Check, CoreMIDIUtils, DebugDisplay, File, Finalize, Initialize,
InstrDialog, MIDIDialogs, MIDIRecord, MiscUtils, Preferences, PS_Stdio, Score.

-------------------------------------------------------------------------------

30 Jan. - 1 Feb.

Removed the 'vers' (version) resource. Affects .rsrc.

Before quitting, we now undo Endian changes to config fields, for the benefit of the Intel
version. Affects Finalize, MiscUtils.

Minor cleanup: reworded an ALRT, added error checking, etc. Affects .rsrc, MiscUtils.h,
MusicFont.h, NightTemplates.h, NMiscTypes.h; CoreMIDIUtils, DurationPopUp, File,
Finalize, FontUtils, Initialize, Menu, MiscUtils, MusicFont, PrefsDialog, ToolPalette.

-------------------------------------------------------------------------------

1 - 6 Feb.

Added calls to FIX_END to InitMusFontTables(), etc., for benefit of the Intel version.
Affects InitNightingale.

Fixed a mysterious bug in LogPrintf() that sometimes resulted in lines never appearing
in the log. Affects UIFUtils.

For Config field values, improved error checking and changed some defaults. Affects
Initialize.

Minor cleanup: moved UI utilities from MiscUtils to a better home, reword an alert, etc.
Affects Defs.h, MiscUtils.h, NTypes.h, UIFUtils.h., .rsrc; CoreMIDIUtils, DrawObject,
Finalize, GraphicMDEF, Initialize, InitNightingale, MiscUtils, ToolPalette, UIFUtils.

-------------------------------------------------------------------------------

6 - 8 Feb.

Fixed Endian-caused bug in Intel version: curly braces aren't drawn and the only staff
line drawn is the bottom line of the bottom staff of the group; instead, there's just a
hugely strrrrreched-out gray pattern. Affects DrawObject.

Extracted a new function VersionString() from DoAboutBox(); we call it to get the
version string for an initial log message and for the About box. Affects MiscUtils.h;
About, MiscUtils.

Before quitting, we now undo Endian changes to MIDI modNR tables, for the benefit of the
Intel version. Affects Finalize, MiscUtils.

Minor cleanup: renamed DrawToolMenu to DrawToolPalette, etc. Affects NightTemplates.h;
About, DrawObject, Finalize, Initialize, ToolPalette, UIFUtils, Windows.

-------------------------------------------------------------------------------

10 - 12 Feb.

Added EndianFixPaletteGlobals(), with numerous calls to FIX_END to fix "Endian" byte
order, for the benefit of the Intel version. Affects MiscUtils.h; Initialize, MiscUtils.

Fixed bug (Issue #170): changing instrument name display with Left End of Systems doesn't
redraw the screen. Affects Menu.

Added an error message for illegal tool palette values in the Prefs file, which we now
check for; reworded error messages, include all referring to "AMNS Tech Support"; enlarged
the "Generic" ALRTs. Affects .rsrc.

Minor cleanup: removed comment referring to a 'TOMG' resource, etc. Affects
PaletteGlobals.h; AccModNRMouse, Event, Initialize, MiscUtils, SpaceTime, ToolPalette,
UIFUtils.

-------------------------------------------------------------------------------

12 - 14 Feb.			 ======== NIGHTINGALE 5.8b6 (15 Feb. 2018) ========

Fixed newly-introduced bug in creating a doc's spacing table. Affects SpaceTime.

Added calls to FIX_END, for the benefit of the Intel version. Affects PS_Stdio,
ToolPalette.

Minor cleanup: changed DEBUG_SHOW to DETAIL_SHOW, etc. Affects Defs.h;  Check,
DelAddRedAccs, DrawHighLevel, Event, Finalize, GRBeam, HeapFileIO, Initialize,
InitNightingale, MIDIFOCmd, MIDIFOpen, MIDIFSave, MIDIPlay, MIDIRecord, MIDIUtils,
NotelistParse, PS_Stdio, RTRhythmDur, ScoreInfo, SpaceHighLevel, SpaceTime, TextDialog,
ToolPalette, Transcribe.

===============================================================================

15 - 17 Feb.

Changed version number from 5.8b6 to 5.8b7. Affects Info.plist.

Added calls to FIX_END, for the benefit of the Intel version. Affects DurationPopUp,
GraphicMDEF, PS_Stdio.

We now prefix a code for the level -- "d' = debug, "W" = warning, etc. -- to LogPrintf()
messages. Affects UIFUtils.

Minor cleanup; don't display the CNFG and tool palette params on startup unless
DETAIL_SHOW, comment or remove obsolete LogPrint(LOG_DEBUG...)s, etc. Affects
DurationPopUp.h, File.h, NightTemplates.h, UIFUtils.h, Utility.h; Check, CheckUtils,
CoreMIDIUtils, Debug2Utils, DialogsEditor, Dragging, DrawUtils, DurationPopUp, File,
GraphicMDEF, HeapFileIO, Initialize, InitNightingale, Insert, Menu, MIDIFOCmd,
MIDIRecord, NotelistOpen, PS_Stdio, SpaceHighLevel, SpaceTime, StringUtils, TextDialog,
UIFUtils.

-------------------------------------------------------------------------------

19 - 21 Feb.

Added more calls to FIX_END, for the benefit of the Intel version. Affects GraphicMDEF.

Got rid of two useless files. Affects SampleMDEF.h; SampleMDEF.

Minor cleanup. Affects NightTemplates.h, Utility.h: Documents, DurationPopUp, FontUtils,
GraphicMDEF, Initialize, Main, MiscUtils, NavServices, ToolPalette, UIFUtils, Utility.

-------------------------------------------------------------------------------

22 - 25 Feb.

Minor cleanup: renamed handler for graphic menus from <MyMDefProc> to <NMDefProc>,
made most MIDI-related messages on startup only given if DETAIL_SHOW, etc. Affects
GraphicMDEF.h; CoreMIDIUtils, DrawObject, DurationPopUp, GraphicMDEF, Initialize,
ToolPalette.

-------------------------------------------------------------------------------

6 - 7 Mar.

Log messages are now preceded by a word giving the priority level. Affects UIFUtils.

Minor cleanup: on calls to LogPrintf(LOG_ERR... and LOG_WARNING, added SysBeep()s before,
etc. Affects Double, DrawObject, DurationPopUp, File, HeaderFooterDialog, Initialize,
UIFUtils, Utility.

-------------------------------------------------------------------------------

8 - 14 Mar.

Worked around an apparent bug in the Intel version of the Resource Manager that resulted
in most symbols' bounding boxes being too low. Affects InitNightingale.

Minor cleanup. Affects CheckUtils, Error, NavServices.

-------------------------------------------------------------------------------

18 - 19 Mar.

Removed code to read ancient files in formats 'N100', 'N101', and 'N102'. Affects File.h;
File.

Most error messages now write a message of level LOG_ERR to the log. Affects Error.

Minor cleanup: tweak log messages about music fonts, etc. Affects MiscUtils.h; File,
Initialize, InitNightingle, MiscUtils, MusicFont, UIFUtils.

-------------------------------------------------------------------------------

20 - 21 Mar.

Added CheckDocumentHdr(), DisplayDocumentHdr(), EndianFixDocumentHdr(), for the benefit
of the Intel version. Affects MiscUtils.h; File, MiscUtils.

Minor cleanup. Affects File, Initialize, MiscUtils, StringPool, UIFUtils.

-------------------------------------------------------------------------------

22-28 Mar.

Moved Endian functions into a new file of their own. Affects NightingalePrefix.pch,
Endian.h; Endian, MiscUtils.

For the benefit of the Intel version, revised EndianFixDocumentHdr() and added call to
it, and added DisplayScoreHdr(), EndianFixScoreHdr(), and EndianFixHeapHdr(). Affects
Endian.h; Endian, HeapFileIO.

Minor cleanup. Affects NMiscTypes.h; File, HeapFileIO, StringPool.

-------------------------------------------------------------------------------

29 - 2 April

For the benefit of the Intel version, added CheckScoreHdr(), enhanced EndianFixScoreHdr().

Fixed bug: the measure-number dialog accepts first measure number values up to 8000,
but they're stored in a _signed_ 13-bit field, so the limit is really 4095. Affects
NLimits.h; DialogsEditor.

Minor cleanup: DisplayDocumentHdr() and DisplayScoreHdr() now display more, renamed a
#define in NLimits, etc. Affects FileConversion.h, NLimits.h; File, HeapFileIO,
SysPageEdit.

-------------------------------------------------------------------------------

3 - 11 April

Enhanced CheckScoreHdr(). Affects File.

Fixed the bug (Issue #165) where "notes entered on a new system aren't drawn until
there's a barline following on the system". Affects DrawObject.

Minor cleanup: rename a function, rearrange functions, rename header fields for
consistency, etc. Affects Defs.h, FileConversion.h, NLimits.h, NTypes.h, NMiscTypes.h,
Utility.h; Browser, Clipboard, DelAddRedTimeSigs, DialogsEditor, Documents, DrawObject,
DSUtils, Endian, Extract, File, Initialize, InsNewUtils, MasterPage, Menu, MPCommands,
NotelistOpen, Reformat, Score, SpaceHighLevel, SysPageEdit, Utility.

-------------------------------------------------------------------------------

12 - 16 April

Minor cleanup: improve appearance of Page Numbers/Headers/Footers/ dialog, etc. Affects
NMiscTypes.h, .rsrc; Beam, Browser, Check, Documents, Double, HeaderFooterDialog,
Initialize, NotelistOpen.

-------------------------------------------------------------------------------

18 - 25 April			======== NIGHTINGALE 5.8b7 (25 April 2018) ========

Minor cleanup: move a couple of MIDI-to-accidental functions to a new home, etc.
Affects File.h, FileConversion.h, MIDIGeneral.h; AutoBeam, DelAddRedAccs, Documents,
Endian, File, MidiMap, MIDIUtils, MiscUtils, NotelistOpen.

===============================================================================

26 April - 16 May

Changed version number from 5.8b7 to 5.8b8. Affects Info.plist.

Minor cleanup. Affects NResourceID.h; Event, File, InfoDialog, Main, Menu, MIDIUtils.

-------------------------------------------------------------------------------

21-29 May

Began work on Issue #173 (allowing more horizontal space as needed for ledger lines).
Affects DrawNRGR, DrawUtils, SpaceTime. 

Minor cleanup. Affects DrawUtils.h; CarbonPrinting, DebugDisplay, DragBeam, DrawingEdit,
DrawNRGR, DrawUtils, InstrDialog, Sheet, SpaceTime.

-------------------------------------------------------------------------------

31 May - 14 June

Fixed bug (Issue #173): The minimum space between consecutive notes/chords with ledger
lines is insufficient, resulting in the ledger lines merging. Affects DrawUtils,
SpaceHighLevel.

Minor cleanup. Affects DSUtils.h, NTypes.h; DrawUtils, DSUtils, SpaceHighLevel,
SpaceTime.

-------------------------------------------------------------------------------

16 June			======== NIGHTINGALE 5.8b8 (16 June 2018) ========

Minor cleanup. Affects Defs.h, Style.h; SpaceHighLevel.

===============================================================================

11-12 August

Changed version number from 5.8b8 to 5.8b9. Affects Info.plist.

Added a #define to control whether to add space to avoid ledger lines colliding.
Affects SpaceHighLevel.

Changed copyright date range in About box to extend into 2018.

Fixed bug: if any note in a Sync has an accidental and any note in the Sync (whether
that note or another) has ledger lines, the minimum space we leave before the Sync
is too large. Affects SpaceHighLevel.

-------------------------------------------------------------------------------

16-23 August

Moved typedefs and #defines for objects and subobjects to a new header, NObjectTypes.h.
Affects NTypes.h; Nightingale_Prefix.pch.

Moved typedefs and #defines for NIGHTSCOREHEADER to a different header. Affects NTypes.h,
NMiscTypes.h.

Minor cleanup: changed all LOG_NOTICE in DebugDisplay() to LOG_INFO, give more details
if a file can't be opened because of heap header problems, etc. Affects Draw.h,
NMiscTypes.h; DebugDisplay, DurationPopUp, HeapFileIO.

-------------------------------------------------------------------------------

25-30 August

Fixed bug (Issue #67): The initial position of the tool palette is sometimes at the
very top of the screen, stuck underneath the menu bar because the drag region is
inaccessible. Affects Initialize. 

Minor cleanup: Pulled VMToollPalette() out of DoViewMenu(), move a struct out of NTypes.h,
etc. Affects ApplicData.h, NMiscTypes.h, NTypes.h; Event, Heaps, Initialize, Menu,
ToolPalette, Windows.

-------------------------------------------------------------------------------

31 August - 1 Sept.

Minor cleanup: moved some structs and enums out of NTypes.h, etc. Affects NMiscTypes.h,
NObjectTypes.h, NTypes.h, OpcodeNightingaleDefs.h.

-------------------------------------------------------------------------------

9 Sept.

Minor cleanup: removed some long-obsolete struct definitions; moved some structs and
enums out of NTypes.h; renamed NTypes.h to NBasicTypes.h; re-allocate type declarations
among three "NxxxTypes.h" headers; etc. Affects Debug.h, NMiscTypes.h, Notelist.h,
NTypes.h, OpcodeNightingaleDefs.h, vars.h; about eight .c files.

-------------------------------------------------------------------------------

10 Sept.			======== NIGHTINGALE 5.8b9 (10 Sept. 2018) ========

Fixed very recent bug: graphic popups for changing dynamics and note duration and
choosing note modifiers never appear because of a line in InitGPopUp() that was
inadvertently commented out.

Moved code for graphic and "regular" popups into a new file; minor cleanup. Adds
PopUpUtils.h; PopUpUtils. Affects DurationPopUp.h, UIFUtils.h; DebugHighLevel,
DurationPopUp, GraphicMDEF, UIFUtils.

===============================================================================

1-4 Nov.

Moved source files (but not headers) for utilities from the CFilesBoth and CFilesEditor
folders to the Utilities folder.

Changed version number from 5.8b9 to 5.8.9. Affects Info.plist.

Minor cleanup: removed an item that's always hidden from the About box, etc. Affects
.rsrc; About.

-------------------------------------------------------------------------------

23-29 Nov.

Minor cleanup: moved some file utilities to FileUtils; split File.cp into two chunks,
one to open and one to save files; etc. Affects CarbonPrinting.h, compilerFlags.h,
FileConversion.h, FileUtils.h; File (gone), FileOpen (new), FileSave (new), FileUtils.

-------------------------------------------------------------------------------

6-9 Jan. 2019			======== NIGHTINGALE 5.8.9 (8 Jan. 2019) ========

Increased the max. number of notes/chords in a tuplet from 50 to 80. Affects NLimits.h.

We now check for attempts to create tuplets with more than the max. number of notes/chords;
if one is found, give an error message and ignore it. Affects Tuplet.

Minor cleanup: #ifdef'ed out print statements to prepare for port to Intel CPUs;
renamed global MAX_CHANGES to MAX_MPCHANGES; etc. Affects compilerFlags.h, NLimits.h,
NMiscTypes.h; FileUtils, Inval, Menu, MIDIFOpen, MIDIPlay, MPImportExport, Tuplet.

===============================================================================

10-13 Jan. 2019

Changed version number from 5.8.9 to 5.9.1. Affects Info.plist.

To allow backward compatibility between Nightingale files written on PowerPC (like all
existing files!) and files written on Intel, we'll remove all bit fields from files. To
start, change the format code from 'N105' to 'N106', rename the headers containing the
relevant declarations from "NxxxTypes.h" to "NxxxTypesN105.h"; and add versions of those
headers without bit fields. Affects Info.plist, NBasicTypes.h, NMiscTypes.h,
NObjTypes.h.

Minor cleanup: revised an obsolete error message; removed unreferenced "typedef struct"
names, etc. Affects .rsrc; NObjTypes.h, NResourceID.h.

-------------------------------------------------------------------------------

14-30 March

Minor cleanup: updated comments; added error check to L_Search(); changed declaration of
GenSubObj to simply contain SUBOBJHEADER instead of the (fungible) fields of the
SUBOBJHEADER. Affects NObjTypes.h, Objects.h; FileOpen, Search, Select, SelUtils, Tuplet.

-------------------------------------------------------------------------------

10 April-3 June

Fixed bug (Issue #174): If the first selected object is a tempo mark or graphic
attached to a barline, the measure number displayed is the number of the preceding
barline, not that of the barline it's attached to. Affects SelUtils. *IN 5.8 & 5.9

Minor cleanup: move five xxxUtils files into the Utilities folder, etc. Affects
CheckUtils, DialogUtils, DrawUtils, PopUpUtils, SelUtils, StringUtils. *IN 5.8 & 5.9

Fixed bug: When Nightingale starts to convert a file in an older format in order to
open it, it displays a message in the log saying so, but it always shows "T" as the
file-format version instead of the 4-char. code (e.g., "N105"). Affects NightTemplates.h;
FileOpen, StringUtils. *IN 5.9 ONLY

Divided a header containing declarations for score headers and unrelated stuff in two;
hacked code for opening files towards goal of converting "N105" format files to "N106".
Affects NMiscTypes.h, (new) NDocAndCnfgTypes.h; FileOpen. *IN 5.9 ONLY

{\rtf1\adeflang1025\ansi\ansicpg10000\uc1\adeff0\deff0\stshfdbch31505\stshfloch31506\stshfhich31506\stshfbi0\deflang1033\deflangfe1033\themelang1033\themelangfe0\themelangcs0{\upr{\fonttbl{\f0\fbidi \fnil\fcharset0\fprq2{\*\panose 02020603050405020304}Times New Roman;}{\f5\fbidi \fnil\fcharset0\fprq2{\*\panose 02000500000000000000}Helvetica;}{\f6\fbidi \fnil\fcharset0\fprq2{\*\panose 02000500000000000000}Courier;}{\f12\fbidi \froman\fcharset77\fprq2{\*\panose 00000000000000000000}New York{\*\falt Times New Roman};}{\f148\fbidi \fnil\fcharset0\fprq2{\*\panose 02000500000000000000}Palatino;}{\flomajor\f31500\fbidi \fnil\fcharset0\fprq2{\*\panose 020b0604020202020204}Arial;}{\fdbmajor\f31501\fbidi \fnil\fcharset0\fprq2{\*\panose 02020603050405020304}Times New Roman;}{\fhimajor\f31502\fbidi \fnil\fcharset0\fprq2{\*\panose 020f0502020204030204}Calibri;}{\fbimajor\f31503\fbidi \fnil\fcharset0\fprq2{\*\panose 02020603050405020304}Times New Roman;}{\flominor\f31504\fbidi \fnil\fcharset0\fprq2{\*\panose 02020603050405020304}Times New Roman;}{\fdbminor\f31505\fbidi \fnil\fcharset0\fprq2{\*\panose 02020603050405020304}Times New Roman;}{\fhiminor\f31506\fbidi \fnil\fcharset0\fprq2{\*\panose 02040503050406030204}Cambria;}{\fbiminor\f31507\fbidi \fnil\fcharset0\fprq2{\*\panose 02020603050405020304}Times New Roman;}}{\*\ud{\fonttbl{\f0\fbidi \fnil\fcharset0\fprq2{\*\panose 02020603050405020304}Times New Roman;}{\f5\fbidi \fnil\fcharset0\fprq2{\*\panose 02000500000000000000}Helvetica;}{\f6\fbidi \fnil\fcharset0\fprq2{\*\panose 02000500000000000000}Courier;}{\f12\fbidi \froman\fcharset77\fprq2{\*\panose 00000000000000000000}New York{\*\falt Times New Roman};}{\f148\fbidi \fnil\fcharset0\fprq2{\*\panose 02000500000000000000}Palatino;}{\flomajor\f31500\fbidi \fnil\fcharset0\fprq2{\*\panose 020b0604020202020204}Arial;}{\fdbmajor\f31501\fbidi \fnil\fcharset0\fprq2{\*\panose 02020603050405020304}Times New Roman;}{\fhimajor\f31502\fbidi \fnil\fcharset0\fprq2{\*\panose 020f0502020204030204}Calibri;}{\fbimajor\f31503\fbidi \fnil\fcharset0\fprq2{\*\panose 02020603050405020304}Times New Roman;}{\flominor\f31504\fbidi \fnil\fcharset0\fprq2{\*\panose 02020603050405020304}Times New Roman;}{\fdbminor\f31505\fbidi \fnil\fcharset0\fprq2{\*\panose 02020603050405020304}Times New Roman;}{\fhiminor\f31506\fbidi \fnil\fcharset0\fprq2{\*\panose 02040503050406030204}Cambria;}{\fbiminor\f31507\fbidi \fnil\fcharset0\fprq2{\*\panose 02020603050405020304}Times New Roman;}}}}{\colortbl;\red0\green0\blue0;\red0\green0\blue255;\red0\green255\blue255;\red0\green255\blue0;\red255\green0\blue255;\red255\green0\blue0;\red255\green255\blue0;\red255\green255\blue255;\red0\green0\blue128;\red0\green128\blue128;\red0\green128\blue0;\red128\green0\blue128;\red128\green0\blue0;\red128\green128\blue0;\red128\green128\blue128;\red192\green192\blue192;}{\*\defchp \fs24\loch\af31506\hich\af31506\dbch\af31505 }{\*\defpap \ql \li0\ri0\sa200\widctlpar\wrapdefault\aspalpha\aspnum\faauto\adjustright\rin0\lin0\itap0 }\noqfpromote {\stylesheet{\ql \li0\ri0\nowidctlpar\wrapdefault\faauto\rin0\lin0\itap0 \rtlch\fcs1 \af0\afs24\alang1033 \ltrch\fcs0 \fs24\lang1033\langfe1033\loch\f12\hich\af12\dbch\af31505\cgrid\langnp1033\langfenp1033 \snext0 Normal;}{\*\cs10 \additive \ssemihidden Default Paragraph Font;}{\*\ts11\tsrowd\trftsWidthB3\trpaddl108\trpaddr108\trpaddfl3\trpaddft3\trpaddfb3\trpaddfr3\trcbpat1\trcfpat1\tblind0\tblindtype3\tscellwidthfts0\tsvertalt\tsbrdrt\tsbrdrl\tsbrdrb\tsbrdrr\tsbrdrdgl\tsbrdrdgr\tsbrdrh\tsbrdrv \ql \li0\ri0\sa200\widctlpar\wrapdefault\aspalpha\aspnum\faauto\adjustright\rin0\lin0\itap0 \rtlch\fcs1 \af0\afs24\alang1033 \ltrch\fcs0 \fs24\lang1033\langfe1033\loch\f31506\hich\af31506\dbch\af31505\cgrid\langnp1033\langfenp1033 \snext11 \ssemihidden Normal Table;}{\s15\ql \li0\ri0\nowidctlpar\tqc\tx4320\tqr\tx8640\wrapdefault\faauto\rin0\lin0\itap0 \rtlch\fcs1 \af0\afs24\alang1033 \ltrch\fcs0 \fs24\lang1033\langfe1033\loch\f12\hich\af12\dbch\af31505\cgrid\langnp1033\langfenp1033 \sbasedon0 \snext15 \slink16 footer;}{\*\cs16 \additive \rtlch\fcs1 \af0 \ltrch\fcs0 \sbasedon10 \slink15 \slocked \ssemihidden Footer Char;}}{\*\rsidtbl \rsid82283\rsid3827189\rsid5392010\rsid7235926\rsid8719146}{\mmathPr\mmathFont0\mbrkBin0\mbrkBinSub0\msmallFrac0\mdispDef0\mlMargin0\mrMargin0\mwrapRight0\mintLim0\mnaryLim0}{\info{\title FileTroubleshooting.RTF}{\author Donald Byrd}{\operator Don Byrd}{\creatim\yr2008\mo4\dy13\hr14\min21}{\revtim\yr2008\mo4\dy13\hr15\min26}{\version7}{\edmins17}{\nofpages9}{\nofwords3821}{\nofchars21780}{\nofcharsws26747}{\vern32769}{\*\saveprevpict}}{\*\xmlnstbl {\xmlns1 http://schemas.microsoft.com/office/word/2003/wordml}}\paperw12240\paperh15840\margl1800\margr1800\margt1440\margb1440\gutter0\ltrsect \ftnbj\aenddoc\trackmoves0\trackformatting1\donotembedsysfont0\relyonvml0\donotembedlingdata1\grfdocevents0\validatexml0\showplaceholdtext0\ignoremixedcontent0\saveinvalidxml0\showxmlerrors0\horzdoc\dghspace120\dgvspace120\dghorigin1701\dgvorigin1984\dghshow0\dgvshow3\jcompress\viewkind1\viewscale100\rsidroot8719146 \fet0{\*\wgrffmtfilter 013f}\ilfomacatclnup0{\*\ftnsep \ltrpar \pard\plain \ltrpar\ql \li0\ri0\nowidctlpar\wrapdefault\faauto\rin0\lin0\itap0 \rtlch\fcs1 \af0\afs24\alang1033 \ltrch\fcs0 \fs24\lang1033\langfe1033\loch\af12\hich\af12\dbch\af31505\cgrid\langnp1033\langfenp1033 {\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid3827189 \chftnsep \par }}{\*\ftnsepc \ltrpar \pard\plain \ltrpar\ql \li0\ri0\nowidctlpar\wrapdefault\faauto\rin0\lin0\itap0 \rtlch\fcs1 \af0\afs24\alang1033 \ltrch\fcs0 \fs24\lang1033\langfe1033\loch\af12\hich\af12\dbch\af31505\cgrid\langnp1033\langfenp1033 {\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid3827189 \chftnsepc \par }}{\*\aftnsep \ltrpar \pard\plain \ltrpar\ql \li0\ri0\nowidctlpar\wrapdefault\faauto\rin0\lin0\itap0 \rtlch\fcs1 \af0\afs24\alang1033 \ltrch\fcs0 \fs24\lang1033\langfe1033\loch\af12\hich\af12\dbch\af31505\cgrid\langnp1033\langfenp1033 {\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid3827189 \chftnsep \par }}{\*\aftnsepc \ltrpar \pard\plain \ltrpar\ql \li0\ri0\nowidctlpar\wrapdefault\faauto\rin0\lin0\itap0 \rtlch\fcs1 \af0\afs24\alang1033 \ltrch\fcs0 \fs24\lang1033\langfe1033\loch\af12\hich\af12\dbch\af31505\cgrid\langnp1033\langfenp1033 {\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid3827189 \chftnsepc \par }}\ltrpar \sectd \ltrsect\linex0\endnhere\sectdefaultcl\sftnbj {\footerr \ltrpar \pard\plain \ltrpar\s15\ql \li0\ri0\widctlpar\tqc\tx4320\tqr\tx8640\wrapdefault\faauto\rin0\lin0\itap0 \rtlch\fcs1 \af0\afs24\alang1033 \ltrch\fcs0 \fs24\lang1033\langfe1033\loch\af12\hich\af12\dbch\af31505\cgrid\langnp1033\langfenp1033 {\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid3827189 \tab \chpgn \par }}{\*\pnseclvl1\pnucrm\pnstart1\pnindent720\pnhang {\pntxta .}}{\*\pnseclvl2\pnucltr\pnstart1\pnindent720\pnhang {\pntxta .}}{\*\pnseclvl3\pndec\pnstart1\pnindent720\pnhang {\pntxta .}}{\*\pnseclvl4\pnlcltr\pnstart1\pnindent720\pnhang {\pntxta )}}{\*\pnseclvl5\pndec\pnstart1\pnindent720\pnhang {\pntxtb (}{\pntxta )}}{\*\pnseclvl6\pnlcltr\pnstart1\pnindent720\pnhang {\pntxtb (}{\pntxta )}}{\*\pnseclvl7\pnlcrm\pnstart1\pnindent720\pnhang {\pntxtb (}{\pntxta )}}{\*\pnseclvl8\pnlcltr\pnstart1\pnindent720\pnhang {\pntxtb (}{\pntxta )}}{\*\pnseclvl9\pnlcrm\pnstart1\pnindent720\pnhang {\pntxtb (}{\pntxta )}}\pard\plain \ltrpar\ql \li0\ri-540\widctlpar\wrapdefault\faauto\rin-540\lin0\itap0 \rtlch\fcs1 \af0\afs24\alang1033 \ltrch\fcs0 \fs24\lang1033\langfe1033\loch\af12\hich\af12\dbch\af31505\cgrid\langnp1033\langfenp1033 {\rtlch\fcs1 \ab\af5 \ltrch\fcs0 \b\f5\fs28\insrsid3827189 \hich\af5\dbch\af31505\loch\f5 Nightingale Files and Troubleshooting Files Nightingale Can\hich\f5 \rquote \loch\f5 t Open\par }\pard \ltrpar\ql \li0\ri-540\sb240\widctlpar\wrapdefault\faauto\rin-540\lin0\itap0 {\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 Nightingale Technical Note #4\par \hich\af148\dbch\af31505\loch\f148 Don Byrd, May 1995; last revised April 2008}{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid5392010 \hich\af148\dbch\af31505\loch\f148  ??NEEDS MORE REV SINCE 2001!}{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \par }{\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid3827189 \par }{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 This document is intended mostly to help tech support people with files for which Nightingale says \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 Nightingale can't open the file. File is probably da\hich\af148\dbch\af31505\loch\f148 maged: heap header contains incorrect...\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  or some such. It should also help programmers understand Nightingale\hich\f148 \rquote \loch\f148 s file format.\par \hich\af148\dbch\af31505\loch\f148 The first few steps in fixing a damaged file require only a debug copy of Nightingale and are easy. The remaining steps require a \hich\af148\dbch\af31505\loch\f148 hex editor, preferably the one in Resorcerer; at least some knowledge of Nightingale file format; and a fair amount of time. In unusual cases, they may also }{\rtlch\fcs1 \ai\af148 \ltrch\fcs0 \i\f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 require}{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148  Resorcerer; a Nightingale template for Resorcerer; a }{\rtlch\fcs1 \ai\af148 \ltrch\fcs0 \i\f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 lot}{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148  of RAM (depending on the size of t\hich\af148\dbch\af31505\loch\f148 he score); and a great deal of time. But don\hich\f148 \rquote \loch\f148 t get discouraged! :-) This is definitely not for the faint of heart, but of the eight or nine files I\hich\f148 \rquote \loch\f148 ve seriously tried to recover, I failed at only two; none of the others were nearly as difficult as I thoug\hich\af148\dbch\af31505\loch\f148 h\hich\af148\dbch\af31505\loch\f148 t they might be.\par \hich\af148\dbch\af31505\loch\f148 First, I\hich\f148 \rquote \loch\f148 ll discuss software tools; then I\hich\f148 \rquote \loch\f148 ll talk about Nightingale\hich\f148 \rquote \loch\f148 s very complex file format, with emphasis on information useful for recovering files. Finally, I\hich\f148 \rquote \loch\f148 ll talk about how to recover files.\par }{\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid3827189 \par }{\rtlch\fcs1 \af5 \ltrch\fcs0 \f5\fs28\insrsid3827189 \hich\af5\dbch\af31505\loch\f5 I. Tools: Hex Editors and Template-b\hich\af5\dbch\af31505\loch\f5 ased Editors\par }{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 As I\hich\f148 \rquote \loch\f148 ve said, one essential tool is a debug copy of Nightingale. Another is a hex editor and/or a template-based editor. (You\hich\f148 \rquote \loch\f148 ll also need a way to convert decimal numbers to/from hex: both MacsBug and Resorcerer can do this\hich\f148 \emdash \hich\af148\dbch\af31505\loch\f148 see below for details\hich\f148 \emdash \loch\f148 or you can do it with a calculator or even by hand.)\par \hich\af148\dbch\af31505\loch\f148 Obviously, a basic problem in fixing problems like this is that you need a way to look at, and edit, the contents of }{\rtlch\fcs1 \ai\af148 \ltrch\fcs0 \i\f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 any }{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 file, no matter how messed up. Programmers run into this typ\hich\af148\dbch\af31505\loch\f148 e of problem frequently, and the usual solution is a \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 hexadecimal\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  (\loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 hex\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  for short) editor. There are several for the Macintosh; Resorcerer includes by far the best one I know of. ResEdit has a hex editor, but it\hich\f148 \rquote \loch\f148 s useless for this purpose, since it works\hich\af148\dbch\af31505\loch\f148  only on resources: in Nightingale files, the data fork is what we care about. I\hich\f148 \rquote \loch\f148 ve heard that a data-fork editor extension for ResEdit is available but I haven\hich\f148 \rquote \loch\f148 t seen it. The editor in Norton Disk Doctor (version 2.0, at least; I haven\hich\f148 \rquote \loch\f148 t checked a recent\hich\af148\dbch\af31505\loch\f148  \hich\af148\dbch\af31505\loch\f148 version) is usable in theory but exceedingly clumsy for our purposes, since it insists on showing files a sector at a time.\par \hich\af148\dbch\af31505\loch\f148 Hex editors can open any file because they make absolutely no assumptions about what the information is. The trouble with this is th\hich\af148\dbch\af31505\loch\f148 at, as a result, they can only display information in pure hexadecimal: a barely-intelligible form, even to programmers. There\hich\f148 \rquote \loch\f148 s a standard solution to this problem, too, namely to give the hex editor a template describing the expected information, thus t\hich\af148\dbch\af31505\loch\f148 u\hich\af148\dbch\af31505\loch\f148 rning it into what might be called a \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 template-based editor\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148 . John Gibson did the \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 incredibly nerdy\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  (his words) job of creating such a template for Nightingale files and Resorcerer, and in fact the results are enormously more readable. However, it has maj\hich\af148\dbch\af31505\loch\f148 or disadvantages as well.\par \hich\af148\dbch\af31505\loch\f148 For one thing, John\hich\f148 \rquote \loch\f148 s template makes Resorcerer work very hard. It displays contents of files slowly, and it wants large amounts of RAM to display even moderate-size files. But this is becoming less and less of a problem as comput\hich\af148\dbch\af31505\loch\f148 ers get faster and have more RAM.\par \hich\af148\dbch\af31505\loch\f148 Now, if you want to modify files, not just look at them, and if your files happen to have something wrong with them, templates have additional major disadvantages unrelated to performance, but I\hich\f148 \rquote \loch\f148 ll talk about them later. T\hich\af148\dbch\af31505\loch\f148 he upshot is this: the Nightingale templates for Resorcerer are terrific tools for learning how Nightingale files (and data structures) work, but they\hich\f148 \rquote \loch\f148 ve rarely been helpful in fixing them. However, in these days of 300MHz PowerMacs with 64 MB or more of \hich\af148\dbch\af31505\loch\f148 R\hich\af148\dbch\af31505\loch\f148 AM, it may well be a different story; I don\hich\f148 \rquote \loch\f148 t yet know.\par }{\rtlch\fcs1 \af0 \ltrch\fcs0 \fs28\insrsid3827189 \par }{\rtlch\fcs1 \af5 \ltrch\fcs0 \f5\fs28\insrsid3827189 \hich\af5\dbch\af31505\loch\f5 II. Nightingale File Format, Data Structures, and Heaps\par }{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 As I suggested in the last section, if you have Resorcerer and a Nightingale template for it, it would be very helpful to have a file open with\hich\af148\dbch\af31505\loch\f148  them while reading this. You might also want to take a look at what Nightingale\hich\f148 \rquote \loch\f148 s Debug command says for \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 Display memory use\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148 , though it\hich\f148 \rquote \loch\f148 s rather cryptic.\par \hich\af148\dbch\af31505\loch\f148 Nightingale differs from many programs in that Nightingale\hich\f148 \rquote \loch\f148 s file format and (internal) data structu\hich\af148\dbch\af31505\loch\f148 res are closely related; that simplifies things somewhat, though both are very complex.\par \hich\af148\dbch\af31505\loch\f148 A Nightingale file begins with the letter \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 N\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  and a three-character Nightingale file-format version number. All versions of Nightingale since 1.0 write files in version\hich\af148\dbch\af31505\loch\f148  \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 N102\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  and read files in versions \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 N100\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148 , \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 N101\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148 , and \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 N102\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148 . (If you need to recover ancient files, Nightingale .996 or .997 can read version \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 N099\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  files and write them in a format current versions of Nightingale can read.) Then there\hich\f148 \rquote \loch\f148 s an extensive hea\hich\af148\dbch\af31505\loch\f148 der describing the score in general (it contains information about page sizes and numbers, fonts, measure numbers, the voice-mapping table, etc. etc.), and a \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 string pool\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  containing all strings that appear in the score. The rest of the file contains a ser\hich\af148\dbch\af31505\loch\f148 ies of \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 heaps\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148 . Each heap contains all the subobjects of a certain type (notes/rests, clefs, beam elements, etc.) or\hich\f148 \emdash \loch\f148 in the case of the very last heap\hich\f148 \emdash \loch\f148 all the objects in the score of all types. Each heap is preceded by the number of subobjects in that heap\hich\af148\dbch\af31505\loch\f148 , and a header giving some information about it. The format is this:\par }\pard \ltrpar\ql \li0\ri-540\sb240\widctlpar\tx0\tx1170\tx2340\wrapdefault\faauto\rin-540\lin0\itap0\pararsid8719146 {\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid3827189 \hich\af6\dbch\af31505\loch\f6 Length (bytes)\tab Item\par }\pard \ltrpar\ql \li0\ri-540\widctlpar\tx0\tx1170\tx2340\wrapdefault\faauto\rin-540\lin0\itap0\pararsid8719146 {\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid3827189 --------------\tab ----\par }\pard \ltrpar\ql \li0\ri-540\sb40\widctlpar\tx0\tx1170\tx2340\wrapdefault\faauto\rin-540\lin0\itap0\pararsid8719146 {\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid8719146 0\tab }{\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid3827189 \hich\af6\dbch\af31505\loch\f6 4\tab \loch\af6\dbch\af31505\hich\f6 \u8220\'d2\hich\af6\dbch\af31505\loch\f6 Nxxx\loch\af6\dbch\af31505\hich\f6 \u8221\'d3\par \hich\af6\dbch\af31505\loch\f6 4\tab }{\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid8719146 \hich\af6\dbch\af31505\loch\f6 4\tab }{\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid3827189 \hich\af6\dbch\af31505\loch\f6 Date/time file was written\par }{\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid8719146 \hich\af6\dbch\af31505\loch\f6 8\tab }{\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid3827189 \hich\af6\dbch\af31505\loch\f6 72\tab Document header\par }\pard \ltrpar\ql \fi-1980\li1980\ri-540\sb40\widctlpar\tx0\tx1170\tx2340\wrapdefault\faauto\rin-540\lin1980\itap0\pararsid8719146 {\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid8719146 \hich\af6\dbch\af31505\loch\f6 80\tab }{\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid82283 \hich\af6\dbch\af31505\loch\f6 2148\tab \tab }{\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid3827189 \hich\af6\dbch\af31505\loch\f6 Score header\par }\pard \ltrpar\ql \li0\ri-540\sb40\widctlpar\tx0\tx1170\tx2340\wrapdefault\faauto\rin-540\lin0\itap0\pararsid8719146 {\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid3827189 \hich\af6\dbch\af31505\loch\f6 2228}{\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid8719146 \tab }{\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid3827189 \hich\af6\dbch\af31505\loch\f6 4\tab String pool length (in bytes)\par \hich\af6\dbch\af31505\loch\f6 2232}{\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid8719146 \tab }{\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid3827189 \hich\af6\dbch\af31505\loch\f6 Variable\tab String pool,\hich\af6\dbch\af31505\loch\f6  containing all the strings\par }\pard \ltrpar\ql \li0\ri-540\sb120\widctlpar\tx0\tx1170\tx2340\wrapdefault\faauto\rin-540\lin0\itap0\pararsid8719146 {\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid8719146 -\tab }{\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid3827189 \hich\af6\dbch\af31505\loch\f6 2 bytes\tab HEAD heap subobject count\par }\pard \ltrpar\ql \li0\ri-540\sb40\widctlpar\tx0\tx1170\tx2340\wrapdefault\faauto\rin-540\lin0\itap0\pararsid8719146 {\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid8719146 -\tab }{\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid3827189 \hich\af6\dbch\af31505\loch\f6 16 bytes\tab HEAD heap header\par }{\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid8719146 -\tab }{\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid3827189 \hich\af6\dbch\af31505\loch\f6 Variable\tab HEAD heap subobjects (parts)\par }\pard \ltrpar\ql \li0\ri-540\sb120\widctlpar\tx0\tx1170\tx2340\wrapdefault\faauto\rin-540\lin0\itap0\pararsid8719146 {\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid8719146 -\tab }{\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid3827189 \hich\af6\dbch\af31505\loch\f6 2 bytes\tab TAIL heap subobject count (always zero)\par }\pard \ltrpar\ql \li0\ri-540\sb40\widctlpar\tx0\tx1170\tx2340\wrapdefault\faauto\rin-540\lin0\itap0\pararsid8719146 {\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid7235926 -\tab }{\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid3827189 \hich\af6\dbch\af31505\loch\f6 16 bytes\tab TAIL heap header\par }{\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid7235926 -\tab }{\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid3827189 0\tab \hich\af6\dbch\af31505\loch\f6 TAIL heap subobjects (always vacuous)\par }\pard \ltrpar\ql \li0\ri-540\sb120\widctlpar\tx0\tx1170\tx2340\wrapdefault\faauto\rin-540\lin0\itap0\pararsid8719146 {\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid3827189 -\tab \hich\af6\dbch\af31505\loch\f6 2 bytes\tab SYNC heap subobject count\par }\pard \ltrpar\ql \li0\ri-540\sb40\widctlpar\tx0\tx1170\tx2340\wrapdefault\faauto\rin-540\lin0\itap0\pararsid8719146 {\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid3827189 -\tab \hich\af6\dbch\af31505\loch\f6 16 bytes\tab SYNC heap header\par -\tab \hich\af6\dbch\af31505\loch\f6 Variable\tab SYNC heap subobjects (notes and rests)\par }\pard \ltrpar\ql \li0\ri-540\sb40\widctlpar\tx0\wrapdefault\faauto\rin-540\lin0\itap0\pararsid7235926 {\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid3827189 \tab \tab ...}{\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid7235926 \tab \tab \tab }{\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid3827189 \par }\pard \ltrpar\ql \li0\ri-540\sb120\widctlpar\tx0\tx1170\tx2340\wrapdefault\faauto\rin-540\lin0\itap0\pararsid8719146 {\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid3827189 -\tab \hich\af6\dbch\af31505\loch\f6 2 bytes\tab OBJECT heap member count\par }\pard \ltrpar\ql \li0\ri-540\sb40\widctlpar\tx0\tx1170\tx2340\wrapdefault\faauto\rin-540\lin0\itap0\pararsid8719146 {\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid3827189 -\tab \hich\af6\dbch\af31505\loch\f6 16 bytes\tab OBJECT heap header\par -\tab \hich\af6\dbch\af31505\loch\f6 Variable\tab OBJECT heap members (SYNCs, CLEF objs, STAFF objs, etc.)\par }\pard \ltrpar\ql \li0\ri-540\sb60\widctlpar\tx0\tx1170\tx2340\wrapdefault\faauto\rin-540\lin0\itap0\pararsid8719146 {\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\insrsid3827189 \par }\pard \ltrpar\ql \li0\ri-540\sb240\widctlpar\wrapdefault\faauto\rin-540\lin0\itap0 {\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 T\hich\af148\dbch\af31505\loch\f148 hus, the score header starts 80 bytes into the file; the string pool starts }{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid82283\charrsid82283 \hich\af148\dbch\af31505\loch\f148 2232}{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid82283 \hich\af148\dbch\af31505\loch\f148  }{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 bytes in. Where following items start depends, of course, on the length of the string pool.\par \hich\af148\dbch\af31505\loch\f148 Now, the contents of a header must satisfy two strict conditions, and the \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 File is \hich\af148\dbch\af31505\loch\f148 probably damaged: heap header...\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  messages refer to violations of one of these conditions:\par }\pard \ltrpar\ql \li360\ri-540\sb120\widctlpar\wrapdefault\faauto\rin-540\lin360\itap0 {\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 1. The header give the \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 type\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  of the heap: the first heap must have type 0, and each following heap must have a type 1 greater than the last.\par \hich\af148\dbch\af31505\loch\f148 2. The size of the obje\hich\af148\dbch\af31505\loch\f148 cts or subobjects in each heap must be a specific pre-determined value.\par }\pard \ltrpar\ql \li0\ri-540\sb120\widctlpar\wrapdefault\faauto\rin-540\lin0\itap0 {\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 Nightingale \hich\f148 \rquote \loch\f148 s ReadHeapHdr is the routine that reads and checks each header. If the Consolation window is displayed and you hold the shift and option keys down while you open a file in\hich\af148\dbch\af31505\loch\f148  Nightingale , ReadHeapHdr tells you what it finds; Example 1 below shows what it says about a very small valid file. Example 2 shows a larger file that starts out OK as far as ReadHeapHdr is concerned, but then the header for what should be heap 11 says \hich\af148\dbch\af31505\loch\f148 i\hich\af148\dbch\af31505\loch\f148 ts type is 0, and Nightingale refuses to open the file.\par }\pard \ltrpar\ql \li0\ri-540\sb240\widctlpar\wrapdefault\faauto\rin-540\lin0\itap0 {\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 TIP: WriteHeapHdr is the inverse of ReadHeapHdr. Holding down the shift and option keys while saving a file makes WriteHeapHdr tell you what it\hich\f148 \rquote \hich\af148\dbch\af31505\loch\f148 s doing, just like ReadHeapHdr. Experimenting with this might also help you figure things out.\par }{\rtlch\fcs1 \af0 \ltrch\fcs0 \fs28\insrsid3827189 \par }{\rtlch\fcs1 \af5 \ltrch\fcs0 \f5\fs28\insrsid3827189 \hich\af5\dbch\af31505\loch\f5 More about Nightingale data structures\par }{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 (Caveat: the following information }{\rtlch\fcs1 \ai\af148 \ltrch\fcs0 \i\f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 could}{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148  be very helpful in fixing unreadable files, but it's not very relevant to the fi\hich\af148\dbch\af31505\loch\f148 les I\hich\f148 \rquote \loch\f148 ve looked at closely.)\par \hich\af148\dbch\af31505\loch\f148 Nightingale's main data structure (technically called the \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 object list\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148 ) is full of \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 links\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  that say what is connected to what\hich\f148 \emdash \loch\f148 for example, what syncs are in a beamset, or what notes are in a sync. These \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 cross references\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  woul\hich\af148\dbch\af31505\loch\f148 d be necessary for some things no matter what, but they\hich\f148 \rquote \loch\f148 re especially common in Nightingale because all items of a given type are stored together, rather than interspersed with other types in a simple logical order.\par \hich\af148\dbch\af31505\loch\f148 The \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 next\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  values at the beginning of ev\hich\af148\dbch\af31505\loch\f148 ery subobject are links. In memory while Nightingale is running, these can be anything, but on a file, they should always (well, there may be rare exceptions, I\hich\f148 \rquote \loch\f148 m not sure) be either 0, or they should be 1 or 2 more than the preceding \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 next\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  value. So if y\hich\af148\dbch\af31505\loch\f148 ou see next=769 in the middle of values like 12 and 14, it\hich\f148 \rquote \loch\f148 s almost certainly wrong.\par \hich\af148\dbch\af31505\loch\f148 Look at the contents of the allegedly-damaged heap (beamsets) and the preceding heap (timesigs). In Ex. 2, most of the timesigs look OK\hich\f148 \emdash \loch\f148 they\hich\f148 \rquote \loch\f148 re 9/8 or 6/8\hich\f148 \emdash \loch\f148 but timesig #20 \hich\af148\dbch\af31505\loch\f148 claims to be -1/-2, #21 is 0/6, etc.! #20 thru #32 are bad, the others look OK. NB: this is tricky: many Nightingale data-structure fields can have odd values that look nonsensical but have some special meaning. If you\hich\f148 \rquote \loch\f148 re in doubt, ask a Nightingale devel\hich\af148\dbch\af31505\loch\f148 o\hich\af148\dbch\af31505\loch\f148 per (most likely me). For example, as I was writing this, I wasn\hich\f148 \rquote \loch\f148 t quite sure that negative values for timesig numerator and denominator were illegal; they are, and so are any denominators except the obvious ones from 1 to 64. The beamsets <next> values l\hich\af148\dbch\af31505\loch\f148 o\hich\af148\dbch\af31505\loch\f148 ok wrong from the beginning, and their <startend>s start out 6, 64, 9, 64: certainly garbage\hich\f148 \emdash \loch\f148 these are the numbers of beams starting or ending at each note/chord. lockLevel should always, or almost always, be 0(?), or 1 for the Object heap, but Nightingal\hich\af148\dbch\af31505\loch\f148 e\hich\af148\dbch\af31505\loch\f148  doesn\hich\f148 \rquote \loch\f148 t check it. Etc. etc.\par \hich\af148\dbch\af31505\loch\f148 TIP: You can learn what things in Nightingale\hich\f148 \rquote \loch\f148 s data structures mean, or at least what common values are, with its Debug Print and Browser commands. You can also use Get Info: it displays information in a more user-friendly (an\hich\af148\dbch\af31505\loch\f148 d therefore less literal) way. And, as I said before, you can use Resorcerer with a Nightingale template.\par \hich\af148\dbch\af31505\loch\f148 For more information, see the Nightingale Programmer\hich\f148 \rquote \loch\f148 s Quick Reference (the file name is \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 NgaleProgQuickRef.t\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148 ; henceforth, \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 NPQR\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148 ). For }{\rtlch\fcs1 \ai\af148 \ltrch\fcs0 \i\f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 much}{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148  more inf\hich\af148\dbch\af31505\loch\f148 ormation, see current versions of the header files that define Nightingale\hich\f148 \rquote \loch\f148 s important data structures. For file troubleshooting, NTypes.h is by far the most useful header file, but NPQR has a list of interesting ones.\par }{\rtlch\fcs1 \af5 \ltrch\fcs0 \f5\fs28\insrsid3827189 \par \hich\af5\dbch\af31505\loch\f5 The Most about Nightingale data stru\hich\af5\dbch\af31505\loch\f5 ctures\par }{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 For the technically-minded, an object list is a doubly-linked list of Nightingale objects. Most object types, e.g., HEAD, MEASURE, and SYNC, have singly-linked lists of subobjects attached to them; a few, e.g., TAIL and PAGE, don\hich\f148 \rquote \loch\f148 t. For SYNCs, by fa\hich\af148\dbch\af31505\loch\f148 r the most important and complex symbols, the subobjects are of course the notes and rests. There\hich\f148 \rquote \loch\f148 s also one type of subobject, MODNRs (note/rest modifiers), that doesn\hich\f148 \rquote \loch\f148 t have its own object type: instead, a list of MODNRs can be attached to a SYNC subobj\hich\af148\dbch\af31505\loch\f148 e\hich\af148\dbch\af31505\loch\f148 ct. Every Nightingale file contains exactly two object lists: first one for the score proper, and second a very short one (exactly six objects) for the score\hich\f148 \rquote \loch\f148 s Master Page.\par \par }{\rtlch\fcs1 \af5 \ltrch\fcs0 \f5\fs28\insrsid3827189 \hich\af5\dbch\af31505\loch\f5 III. More on Hex Editors and Resorcerer Templates\par }{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 I\hich\f148 \rquote \loch\f148 ve already mentioned the advan\hich\af148\dbch\af31505\loch\f148 tages and disadvantages of a Resorcerer template for Nightingale files relative to raw hex editors. But for two additional reasons, the template editor\hich\f148 \rquote \loch\f148 s usefulness in recovering files with heap errors is limited.\par \hich\af148\dbch\af31505\loch\f148 First, you can\hich\f148 \rquote \loch\f148 t change the number of obje\hich\af148\dbch\af31505\loch\f148 cts of a given type with Resorcerer\hich\f148 \rquote \loch\f148 s template editor. Resorcerer needs this number to parse the data, so you can\hich\f148 \rquote \loch\f148 t change it while the results of }{\rtlch\fcs1 \ai\af148 \ltrch\fcs0 \i\f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 using}{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148  it are in view. With the problems I\hich\f148 \rquote \loch\f148 ve actually seen in the files I\hich\f148 \rquote \loch\f148 ve recovered, one such number alway\hich\af148\dbch\af31505\loch\f148 s needs to be changed. To get around this, you have to switch to the hex editor; after changing the number, you can go back to the template editor.\par \hich\af148\dbch\af31505\loch\f148 Second, starting at the point where the file starts being messed up, the template\hich\f148 \rquote \loch\f148 s description of the file \hich\af148\dbch\af31505\loch\f148 may be wildly inaccurate, or it may be perfectly accurate, depending on what\hich\f148 \rquote \loch\f148 s wrong. Unfortunately, with the problems I\hich\f148 \rquote \loch\f148 ve actually seen in the files I\hich\f148 \rquote \loch\f148 ve recovered, the template\hich\f148 \rquote \loch\f148 s description always becomes wildly inaccurate.\par \hich\af148\dbch\af31505\loch\f148 Nonetheless, Nightingale tem\hich\af148\dbch\af31505\loch\f148 plates could be quite helpful for learning about Nightingale files and data structures. \par \hich\af148\dbch\af31505\loch\f148 I have a tiny file, <twinkleCantOpen>, which should be good for practicing on. There are two things wrong with it. First, as Nightingale reports when you try to open i\hich\af148\dbch\af31505\loch\f148 t, the object type for KeySigs: it should be 0, but it\hich\f148 \rquote \loch\f148 s 9. If you fix this and try to open it again, Nightingale says something similar, but it\hich\f148 \rquote \loch\f148 s a more subtle problem. Actually, the number of Beamsets is 7 (in Resorcerer, \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 ANOTEBEAM 7\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148 ), but it\hich\f148 \rquote \loch\f148 s really \hich\af148\dbch\af31505\loch\f148 6. As a result, what Nightingale thinks is Beamset #7 is actually the header for the next (Connect) heap, and what it thinks is the header for the Connect heap is really part of the contents of that heap. But, as I said, you can\hich\f148 \rquote \loch\f148 t change the number of obj\hich\af148\dbch\af31505\loch\f148 e\hich\af148\dbch\af31505\loch\f148 cts of any type with Resorcerer\hich\f148 \rquote \loch\f148 s template editor: you must use its hex editor. ??TO BE COMPLETED\par \par }{\rtlch\fcs1 \af5 \ltrch\fcs0 \f5\fs28\insrsid3827189 \hich\af5\dbch\af31505\loch\f5 IV. Real-Life Files with Heap Header Problems\par }\pard \ltrpar\ql \li0\ri-540\sb120\widctlpar\wrapdefault\faauto\rin-540\lin0\itap0 {\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 Every file I\hich\f148 \rquote \loch\f148 ve seriously tried to recover has had one basic problem: a heap, or possibly two heaps, for which \hich\af148\dbch\af31505\loch\f148 the number of objects/subobjects recorded in the file (what ReadHeapHdr calls \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 nFObjs\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148 ) is wrong. In each case, the heap with this problem was the last one that ReadHeapHdr liked, i.e., the one }{\rtlch\fcs1 \ai\af148 \ltrch\fcs0 \i\f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 before}{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148  the one Nightingale complained about. I think, but I\hich\f148 \rquote \loch\f148 m \hich\af148\dbch\af31505\loch\f148 not sure, that nFObjs was too small in each case.  Most often, the problem is in heap 2, 11, or 12; I don\hich\f148 \rquote \loch\f148 t know why.\par }\pard \ltrpar\ql \li0\ri-540\sb240\widctlpar\wrapdefault\faauto\rin-540\lin0\itap0 {\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 After fixing this problem, in almost all cases, Nightingale could open the file. There were still serious problems, but they could be fixe\hich\af148\dbch\af31505\loch\f148 d inside of Nightingale. In one case, Nightingale got closer to opening the file (i.e., it got thru more heaps), but then quit, saying \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 unexpected end-of-file\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148 ; I never followed this case up.\par \par }{\rtlch\fcs1 \af5 \ltrch\fcs0 \f5\fs28\insrsid3827189 \hich\af5\dbch\af31505\loch\f5 V. Recipe for Repairing Files with Heap Header Problems}{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \par \hich\af148\dbch\af31505\loch\f148 1. Make\hich\af148\dbch\af31505\loch\f148  a copy of the messed-up file. This is mostly in case your attempts to fix it make the problem worse; it also might be useful to compare your version to the original at some point. Also, }{\rtlch\fcs1 \ai\af148 \ltrch\fcs0 \i\f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 and this is important,}{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148  ask the victim for a copy of the most recent p\hich\af148\dbch\af31505\loch\f148 revious version of the file that can be opened: it might be very helpful (a) to get at an idea of what the score should look like, (b) to help Nightingale developers understand what messes up files, and (c) if repair attempts fail, to preserve a version t\hich\af148\dbch\af31505\loch\f148 h\hich\af148\dbch\af31505\loch\f148 at may be the best that can be done.\par \hich\af148\dbch\af31505\loch\f148 2. Get into Nightingale. Bring the Debug (Consolation) window up, and click on the \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 document\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  icon at the bottom to turn on its \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 save output to a file\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  feature; name a file to use.\par \hich\af148\dbch\af31505\loch\f148 3. Hold\hich\af148\dbch\af31505\loch\f148  down the shift and option keys and Open the damaged Nightingale file. This will write a small number of messages from ReadHeapHdr into the Consolation window, and therefore into the Consolation \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 save output\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  file.\par \hich\af148\dbch\af31505\loch\f148 4. After a few of ReadHeapHdr\hich\f148 \rquote \loch\f148 s messages \hich\af148\dbch\af31505\loch\f148 (from one or two to about 20), Nightingale will give its \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 can't open the file. File is probably damaged...\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  message. OK it and any following messages (which are almost always meaningless) and quit. You now have a short text file from Consolation containing\hich\af148\dbch\af31505\loch\f148  some important clues. It\hich\f148 \rquote \loch\f148 d help to print it out now, especially if you don\hich\f148 \rquote \loch\f148 t have lots of screen space.\par \hich\af148\dbch\af31505\loch\f148 5. Using your hex editor, open the Nightingale file and display its contents. If you\hich\f148 \rquote \loch\f148 re using Resorcerer, after opening the file, click on \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 <DF>\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  (Data\hich\af148\dbch\af31505\loch\f148  Fork) in the left column; click the \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 Hex\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  button to display it in hexadecimal; and give the Hex>Decimal offsets command.\par \hich\af148\dbch\af31505\loch\f148 6. Now here\hich\f148 \rquote \loch\f148 s the hard part. We know there\hich\f148 \rquote \loch\f148 s something wrong in the file no further into it than the heap header that ReadHeapHdr comp\hich\af148\dbch\af31505\loch\f148 lained about. But the damage may be earlier, perhaps much earlier! In fact, if this is a typical messed-up file, the problem is that the number of subobjects in the }{\rtlch\fcs1 \ai\af148 \ltrch\fcs0 \i\f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 previous}{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148  heap was wrong; therefore you must determine the correct number for that heap. To \hich\af148\dbch\af31505\loch\f148 figure out what the correct number is, start by looking for patterns near the supposed end of that heap, i.e., the supposed beginning of the one ReadHeapHdr complained about. (\loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 FPos\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  is the position in the file where the }{\rtlch\fcs1 \ai\af148 \ltrch\fcs0 \i\f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 contents}{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148  of a given heap begins, an\hich\af148\dbch\af31505\loch\f148 d just }{\rtlch\fcs1 \ai\af148 \ltrch\fcs0 \i\f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 after}{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148  the heap header; in other words, it\hich\f148 \rquote \loch\f148 s the location where the first thing within the heap starts.)\par \hich\af148\dbch\af31505\loch\f148 If your hex editor allows it (Resorcerer does) and you have a wide enough screen, adjusting the width of the display so that each object/subobjec\hich\af148\dbch\af31505\loch\f148 t exactly fills one line is }{\rtlch\fcs1 \ai\af148 \ltrch\fcs0 \i\f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 incredibly}{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148  helpful: it makes patterns that repeat from one item to another just jump off the screen at you. The number of bytes per object/subobject is given in the NPQR.\par \hich\af148\dbch\af31505\loch\f148 If your screen isn\hich\f148 \rquote \loch\f148 t wide enough to handle one line per o\hich\af148\dbch\af31505\loch\f148 bject/subobject, two lines each should be almost as good, but the hex editor probably won\hich\f148 \rquote \loch\f148 t allow lines half the length of an object/subobject if that\hich\f148 \rquote \loch\f148 s an odd number. For example, Sync subobjects take 30 bytes; showing 30 bytes in a line requires a fairl\hich\af148\dbch\af31505\loch\f148 y\hich\af148\dbch\af31505\loch\f148  wide screen, but, unfortunately, the two-line alternative isn\hich\f148 \rquote \loch\f148 t available in Resorcerer, since 30/2 is an odd number. Header subobjects are much worse, at 62 bytes, and again the two-line alternative isn\hich\f148 \rquote \loch\f148 t available in Resorcerer: here the best solution \hich\af148\dbch\af31505\loch\f148 i\hich\af148\dbch\af31505\loch\f148 s probably to try the number in the last previous version of the file that Nightingale can open. On the other hand, BEAMSET subobjects take 6 bytes; showing only 6 bytes in a line requres a window so narrow that some of the other information Resorcerer di\hich\af148\dbch\af31505\loch\f148 s\hich\af148\dbch\af31505\loch\f148 plays is truncated. In this case, I recommend two subobjects (12 bytes) per line.\par \hich\af148\dbch\af31505\loch\f148 Unfortunately, knowing what all these hexadecimal numbers are can really help, too. If you have the documentation on the Nightingale file format (either the NPQR or the heade\hich\af148\dbch\af31505\loch\f148 r file <NTypes.h>), use it. See above for more on this.\par \hich\af148\dbch\af31505\loch\f148 For example, SYNC subobjects (notes and rests) very often contain \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 000000E4\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148 , because they have the MIDI playtime offset (playTimeDelta, two bytes; nearly always zero) followed by the play duration in\hich\af148\dbch\af31505\loch\f148  ticks (playDur, two bytes; for an eighth note with default legatoness, hex 00E4). Other common note durations with default legatoness include 0072=16th, 0156=dotted eighth, 01C8=quarter, 02AC=dotted quarter, 0390=half.\par \hich\af148\dbch\af31505\loch\f148 7. When you think you know where the\hich\af148\dbch\af31505\loch\f148  heap really ends,  you may want to check whether the next data appears to be a heap header: 2 bytes of nFObjs, then the 16-byte Heap struct. If it doesn\hich\f148 \rquote \loch\f148 t look like a heap header, it\hich\f148 \rquote \loch\f148 s quite possible you\hich\f148 \rquote \loch\f148 re confused; this is pretty tricky. Or (much less \hich\af148\dbch\af31505\loch\f148 l\hich\af148\dbch\af31505\loch\f148 ikely, in my experience) it may be that the file is really trashed, not just that a subobject count was wrong.\par \hich\af148\dbch\af31505\loch\f148 To proceed with the fixing the subobject count, determine the correct number of subobjects by dividing the length of the heap (excluding the head\hich\af148\dbch\af31505\loch\f148 er) by the length of a subobject. For example, a SYNC subobject takes 30 bytes; if the SYNC heap occupies 9600 bytes, there are 320 SYNC subobjects.\par \hich\af148\dbch\af31505\loch\f148 8. Replace the subobject count with what you think is the correct number of subobjects. Your hex editor wil\hich\af148\dbch\af31505\loch\f148 l undoubtedly make you type it in hexadecimal! (Resorcerer has a handy Value Converter. MacsBug can also convert decimal to hex and vice-versa: just go into MacsBug and type a hex number, or a decimal number preceded by \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 #\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148 .)\par \hich\af148\dbch\af31505\loch\f148 Please }{\rtlch\fcs1 \ai\af148 \ltrch\fcs0 \i\f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 be very careful that yo\hich\af148\dbch\af31505\loch\f148 u\hich\f148 \rquote \loch\f148 ve done this correctly:}{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148  double-check that you\hich\f148 \rquote \loch\f148 ve put the number you wanted just where you wanted it. Otherwise, the next step will make you think you\hich\f148 \rquote \loch\f148 ve just wasted two hours when the only problem might be a typing error.\par \hich\af148\dbch\af31505\loch\f148 9. Save the file, and try to ope\hich\af148\dbch\af31505\loch\f148 n it with Nightingale. Very likely it\hich\f148 \rquote \loch\f148 s still messed up to some extent: this may cause Nightingale to hang trying to open it. If so, doing something slightly different\hich\f148 \emdash \loch\f148 e.g., relaunching Nightingale, showing the Consolation window, or rebooting first\hich\f148 \emdash \loch\f148 may m\hich\af148\dbch\af31505\loch\f148 a\hich\af148\dbch\af31505\loch\f148 ke the difference.\par \hich\af148\dbch\af31505\loch\f148 If you can open it, very likely it\hich\f148 \rquote \loch\f148 ll still be messed up, but you should be able fix it with Nightingale\hich\f148 \rquote \loch\f148 s regular tools plus the Debug and, in worse cases, Browser and Delete Objects commands. In particular, you may get a stream of mess\hich\af148\dbch\af31505\loch\f148 ages of the form \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 OBJ AT 253 HAS nEntries=8 BUT xxx SUBOBJECTS.\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  To fix that, be sure nothing is selected; use Browser to select the offending object (Browser\hich\f148 \rquote \loch\f148 s Go To is indispensable for this); then Delete Objects. In the worst cases, this technique may f\hich\af148\dbch\af31505\loch\f148 ail because Nightingale hangs or crashes (a) when you try to make fixes or (b) when you try to save the \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 fixed\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  score. If that happens, create a new empty score with the same format as the bad one, including initial clefs, key signatures, and time signatur\hich\af148\dbch\af31505\loch\f148 es; then Copy and Paste from the bad score to the new one. (You may want to leave out particularly screwed-up parts of the score. Also, creating blank pages manually and copying and pasting content into them may work better than the Copy Pages and Paste P\hich\af148\dbch\af31505\loch\f148 a\hich\af148\dbch\af31505\loch\f148 ges commands.)\par \par }{\rtlch\fcs1 \af5 \ltrch\fcs0 \f5\fs28\insrsid3827189 \hich\af5\dbch\af31505\loch\f5 Va. Substitute Steps: using a Resorcerer Template\par }{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 For the reasons I mentioned before, using a Resorcerer template makes this easier in some ways but harder in others.\par \hich\af148\dbch\af31505\loch\f148 5. Use a copy of Resorcerer with its \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 Preferred Size\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  set (via Finder \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 Ge\hich\af148\dbch\af31505\loch\f148 t Info\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148 ) to a large number. Use at least 4000K for a small score; 8000K should be enough for a medium-size score (200K or so); for a large score, who knows? The file \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 Nightingale <DF> TMPLs\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  contains the two Resorcerer templates: \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 <DF> full\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  and \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 <DF> with\hich\af148\dbch\af31505\loch\f148 out note/rest details\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148 . Put a copy of the template you want in the \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 Resorcerer Templates\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  folder, in the same folder as Resorcerer itself. (NB: this _should_ do the trick, but I usually find it necessary to actually paste the template into the score to get\hich\af148\dbch\af31505\loch\f148  Resorcerer to pay attention to it!) If you don\hich\f148 \rquote \loch\f148 t expect to need note/rest details, use the simplified version: it\hich\f148 \rquote \loch\f148 ll save memory, make Resorcerer a little faster, and reduce the size of the mountains of irrelevant stuff you\hich\f148 \rquote \loch\f148 ll be scrolling thru. (For exa\hich\af148\dbch\af31505\loch\f148 m\hich\af148\dbch\af31505\loch\f148 ple 2, the error message doesn\hich\f148 \rquote \loch\f148 t occur until way after the SYNC (note/rest) heap has been read, so it\hich\f148 \rquote \loch\f148 s likely\hich\f148 \emdash \loch\f148 though not certain\hich\f148 \emdash \loch\f148 that you won\hich\f148 \rquote \loch\f148 t need to see the details of notes/rests.)\par \hich\af148\dbch\af31505\loch\f148 Then open the score in question. Click on the \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 Data\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  button, and wait \hich\af148\dbch\af31505\loch\f148 for a little while. Viola! (If Resorcerer says there\hich\f148 \rquote \loch\f148 s more data than the template describes and asks \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 Do you want to truncate the data or maintain it?\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148 , say \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 Maintain it\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148 ; if it says there\hich\f148 \rquote \loch\f148 s less data than the template describes, say \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 Continue\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148 . Either is\hich\af148\dbch\af31505\loch\f148  possible with a damaged file.)\par \hich\af148\dbch\af31505\loch\f148 6. Now, we }{\rtlch\fcs1 \ai\af148 \ltrch\fcs0 \i\f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 know}{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148  there\hich\f148 \rquote \loch\f148 s something wrong in the file no further into it than the heap described in the last ReadHeapHdr message. But the damage may be earlier, perhaps much earlier. In Example 2 below, heap 10 says \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 nFObjs=34\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148 , i.e., the TIMESIG heap contains 34 subobjects. If Nightingale actually wrote 35 TIMESIGs on the file, then what it thought was the header for heap 11 would have been something completely different (namely, the last timesig or two), and the result would \hich\af148\dbch\af31505\loch\f148 probably be a complaint about heap 11\hich\f148 \emdash \loch\f148 very possibly the complaint we\hich\f148 \rquote \loch\f148 re getting here. However\hich\f148 \emdash \loch\f148 it says for heap 11 \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 nFObjs=36\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148 , a very reasonable number for a file of this size. So it\hich\f148 \rquote \loch\f148 s more likely that this really is the beginning of heap ??TO BE COMPLETED\par \par }\pard \ltrpar\ql \li0\ri-540\widctlpar\wrapdefault\faauto\rin-540\lin0\itap0 {\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid3827189 \par }{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 Example 1. What ReadHeapHdr says about a very small (6K, 2 staves, 8 notes) valid file. \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 nFObjs\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148   is the number of subobjects in the heap in the file. \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 FPos\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148  is the position in the file where the }{\rtlch\fcs1 \ai\af148 \ltrch\fcs0 \i\f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 contents}{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148  of the heap begins, and just }{\rtlch\fcs1 \ai\af148 \ltrch\fcs0 \i\f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 after}{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148  the heap head\hich\af148\dbch\af31505\loch\f148 er; it\hich\f148 \rquote \loch\f148 s in bytes from the beginning of the file. For example, since the object/subobject count occupies 2 bytes and the heap header occupies 16, the SYNC heap header begins at (1850-16) = 1834; the object/subobject count begins at (1850-18) = 1832. Note \hich\af148\dbch\af31505\loch\f148 t\hich\af148\dbch\af31505\loch\f148 hat this is the same as the position given after the TAIL header: this makes sense, since the TAIL heap contains zero subobjects.\par \par }\pard \ltrpar\ql \li0\ri-540\widctlpar\tx360\wrapdefault\faauto\rin-540\lin0\itap0 {\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid3827189 \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 0 (HEAD) nFObjs=4  objSize=62 type=0 FPos:1566\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 1 (TAIL) nFObjs=0  objSize=0 type=1 FPos\hich\af6\dbch\af31505\loch\f6 :1832\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 2 (SYNC) nFObjs=8  objSize=30 type=2 FPos:1850\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 3 (REPEATEND) nFObjs=0  objSize=6 type=3 FPos:2108\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 4 (PAGE) nFObjs=0  objSize=0 type=4 FPos:2126\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 5 (SYSTEM) nFObjs=0  objSize=0 type=5 FPos:2144\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 6 (STAFF) nFObjs=2  objSize=50 type=6 FPos:2162\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 7 (MEASURE) nFObjs=2  objSize=40 type=7 FPos:2280\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 8 (CLEF) nFObjs=1  objSize=10 type=\hich\af6\dbch\af31505\loch\f6 8 FPos:2378\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 9 (KEYSIG) nFObjs=1  objSize=24 type=9 FPos:2406\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 10 (TIMESIG) nFObjs=1  objSize=12 type=10 FPos:2448\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 11 (BEAMSET) nFObjs=6  objSize=6 type=11 FPos:2478\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 12 (CONNECT) nFO\hich\af6\dbch\af31505\loch\f6 bjs=2  objSize=12 type=12 FPos:2532\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 13 (DYNAMIC) nFObjs=0  objSize=12 type=13 FPos:2574\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 14 (MODNR) nFObjs=0  objSize=6 type=14 FPos:2592\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 15 (GRAPHIC) nFObjs=0  objSize=6 type=15 FPos:2610\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHd\hich\af6\dbch\af31505\loch\f6 r: heap 16 (OCTAVE) nFObjs=0  objSize=4 type=16 FPos:2628\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 17 (SLUR) nFObjs=0  objSize=42 type=17 FPos:2646\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 18 (TUPLET) nFObjs=0  objSize=4 type=18 FPos:2664\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 19 (GRSYNC) nFObjs=0  objSize=30 type=19 F\hich\af6\dbch\af31505\loch\f6 Pos:2682\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 20 (TEMPO) nFObjs=0  objSize=0 type=20 FPos:2700\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 21 (SPACER) nFObjs=0  objSize=0 type=21 FPos:2718\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 22 (ENDING) nFObjs=0  objSize=0 type=22 FPos:2736\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 23 (PSEUDOMEAS) nFObjs\hich\af6\dbch\af31505\loch\f6 =0  objSize=6 type=23 FPos:2754\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 24 (OBJECT) nFObjs=27  objSize=46 type=24 FPos:2772\par }\pard \ltrpar\ql \li0\ri-540\widctlpar\wrapdefault\faauto\rin-540\lin0\itap0 {\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid3827189 \par }{\rtlch\fcs1 \af148 \ltrch\fcs0 \f148\insrsid3827189 \hich\af148\dbch\af31505\loch\f148 Example 2. What ReadHeapHdr says about a fairly small (75K) damaged file, \loch\af148\dbch\af31505\hich\f148 \u8220\'d2\hich\af148\dbch\af31505\loch\f148 Angelus ad Virginem\loch\af148\dbch\af31505\hich\f148 \u8221\'d3\hich\af148\dbch\af31505\loch\f148 . The BEAMSET heap header begins at 55211.\par }{\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid3827189 \par }\pard \ltrpar\ql \li0\ri-540\widctlpar\tx360\wrapdefault\faauto\rin-540\lin0\itap0 {\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid3827189 \tab }{\rtlch\fcs1 \af6 \ltrch\fcs0 \f6\fs20\insrsid3827189 \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr:\hich\af6\dbch\af31505\loch\f6  heap 0 (HEAD) nFObjs=12  objSize=62 type=0 FPos:2089\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 1 (TAIL) nFObjs=0  objSize=0 type=1 FPos:2851\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 2 (SYNC) nFObjs=874  objSize=30 type=2 FPos:2869\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: he\hich\af6\dbch\af31505\loch\f6 ap 3 (REPEATEND) nFObjs=0  objSize=6 type=3 FPos:29107\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 4 (PAGE) nFObjs=0  objSize=0 type=4 FPos:29125\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 5 (SYSTEM) nFObjs=0  objSize=0 type=5 FPos:29143\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 6 (STAFF) nFObjs=85  objSize=50 type=6 FPos:2916\hich\af6\dbch\af31505\loch\f6 1\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 7 (MEASURE) nFObjs=465  objSize=40 type=7 FPos:33429\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 8 (CLEF) nFObjs=80  objSize=10 type=8 FPos:52047\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 9 (KEYSIG) nFObjs=80  objSize=24 type=9 FPos:52865\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 10 (TIMESIG) nFObjs=34  o\hich\af6\dbch\af31505\loch\f6 bjSize=12 type=10 FPos:54803\par \tab \hich\af6\dbch\af31505\loch\f6 ReadHeapHdr: heap 11 (BEAMSET) nFObjs=36  objSize=0 type=0 FPos:55229\par \tab \hich\af6\dbch\af31505\loch\f6 File is probably damaged: heap header contains incorrect type (heap object type=11).}{\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid3827189 \par }{\*\themedata 504b030414000600080000002100e9de0fbfff0000001c020000130000005b436f6e74656e745f54797065735d2e786d6cac91cb4ec3301045f748fc83e52d4a9cb2400825e982c78ec7a27cc0c8992416c9d8b2a755fbf74cd25442a820166c2cd933f79e3be372bd1f07b5c3989ca74aaff2422b24eb1b475da5df374fd9ad5689811a183c61a50f98f4babebc2837878049899a52a57be670674cb23d8e90721f90a4d2fa3802cb35762680fd800ecd7551dc18eb899138e3c943d7e503b6b01d583deee5f99824e290b4ba3f364eac4a430883b3c092d4eca8f946c916422ecab927f52ea42b89a1cd59c254f919b0e85e6535d135a8de20f20b8c12c3b00c895fcf6720192de6bf3b9e89ecdbd6596cbcdd8eb28e7c365ecc4ec1ff1460f53fe813d3cc7f5b7f020000ffff0300504b030414000600080000002100a5d6a7e7c0000000360100000b0000005f72656c732f2e72656c73848fcf6ac3300c87ef85bd83d17d51d2c31825762fa590432fa37d00e1287f68221bdb1bebdb4fc7060abb0884a4eff7a93dfeae8bf9e194e720169aaa06c3e2433fcb68e1763dbf7f82c985a4a725085b787086a37bdbb55fbc50d1a33ccd311ba548b63095120f88d94fbc52ae4264d1c910d24a45db3462247fa791715fd71f989e19e0364cd3f51652d73760ae8fa8c9ffb3c330cc9e4fc17faf2ce545046e37944c69e462a1a82fe353bd90a865aad41ed0b5b8f9d6fd010000ffff0300504b0304140006000800000021006b799616830000008a0000001c0000007468656d652f7468656d652f7468656d654d616e616765722e786d6c0ccc4d0ac3201040e17da17790d93763bb284562b2cbaebbf600439c1a41c7a0d29fdbd7e5e38337cedf14d59b4b0d592c9c070d8a65cd2e88b7f07c2ca71ba8da481cc52c6ce1c715e6e97818c9b48d13df49c873517d23d59085adb5dd20d6b52bd521ef2cdd5eb9246a3d8b4757e8d3f729e245eb2b260a0238fd010000ffff0300504b0304140006000800000021009d5c8bbe10070000871d0000160000007468656d652f7468656d652f7468656d65312e786d6cec594f6f1b4514bf23f11d467b6f13274e9a4475aad8b109b469a3d82dea71bc3bf64e33bbb39a1927f10db547242444411ca8c48d03022ab51297f269024550a47e05deccecae77e271e39400153487d63bfb7b6fdefbbd3ff367af5e3b4e183a2442529e3682dae5c5009134e4114d878de076af73692d4052e134c28ca7a4118c890cae6dbefbce55bca162921004f2a9dcc08d20562adb585890210c63799967248577032e12ace0510c1722818f406fc2169616175717124cd300a53801b5b706031a12d4d32a83cd42799bc163aaa41e0899e86ad5c49130d8e8a0a611722c5b4ca043cc1a01cc13f1a31e39560162582a78d10816cd5fb0b07975016fe4424ccd90adc875cc5f2e970b44074b664e31ec9793d63af5f52bdba57e03606a1ad76eb75bed5aa9cf00701882a7d696aace7a67add62c745640f6e7b4eed6e2ca62ddc557f42f4fd9bcde6c3657d6735bac5203b23feb53f8b5c5d5fad6928337208b5f99c2d79b5badd6aa8337208b5f9dc277aeacafd65dbc01c58ca60753681dd04e27d75e42069ced78e16b005f5bcce113146443995d7a8a014fd5ac5c4bf03d2e3a00d04086154d911a67648043c8e21666b42fa89e006f105c796387423935a4e742321434538de0830c43454cf4bd7cf6ddcb674fd0c9fda727f77f3c79f0e0e4fe0f569123b583d36155eac5379ffef1e823f4fb93af5f3cfcdc8f9755fc2fdf7ffcf34f9ff981503e13739e7ff1f8d7a78f9f7ff9c96fdf3ef4c0b704ee57e13d9a10896e9223b4cf1370ccb0e25a4efae27c12bd18d3aac4563a9438c57a168ffeb68a1df4cd3166d8836b1297c13b02da870ff8dee89e637037162395c7dbf1ec7a9c38c05dce59930b2f0bd7f55c159a7ba374e89f5c8caab87d8c0f7d73b770eac4b73dcaa06f529fca564c1c33f7184e151e929428a4dff103423c7cdda5d4e1759786824b3e50e82e454d4cbd94f468dfc9a689d00e4d202e639f81106f879bdd3ba8c999cfeb6d72e822a12a30f318df23cca1f13d3c5238f1a9ece1845509bf8155ec33b23b166115d7960a223d248ca37644a4f4c9dc12e06f25e8d7a175f8c3becbc6898b148a1ef874dec09c5791dbfca015e324f361bb348dabd8f7e501a428467b5cf9e0bbdcad10fd0c71c0e9cc70dfa1c409f7d9dde0361d3a264d1244bf19091d4b68d54e074e68faaa769c4037ceddb9b8760c0df0f9578f3c99f5a636e22d20c157093ba7daef2cdce9a6dbe222a26f7ecfddc6a3748f409a4f2f3c6f5beedb961bfce75beeac7a9eb7d14e7a2bb45dbdbdb19b62b3454e66ee900794b1ae1a3372439a4db2847522eac0a09633a743529e98b2187ee67dddc10d0536324870f521557137c6196cb06b81563294b9eaa144199770b033c35edd1a0f9b74658f852bfac060fb81c46a97477678590f17e782528d596d86e6f0594cb4ac15cc3bd9f2955c29b8fd3a93d5b45173cf5633a69956e7cc56ba0c319c760d064b3661038260db022cafc2f95c4f0d0713cc48a479b76b6f11161385bf2744b9d7d6911847c486c819aeb05933b12b52c85c10404a7942773e364bd680b4b38d3069313b7fe624b95030215997dda96a6269b5b6588a8e1ac1facad24a80429c3582011c49e1679241d0a4deb26136847b9d50099bb567d6a229d289c7ebfeacaac12dc38c8271ca3813526d6319db189a5779a858aa67b2f62fadd475b25d8c0336515fc38ae53548917fcd0a08b51b5a3218905055835d19d1dcd9c7bc13f29122a21b4747a8cf46621f43f88153ed4f4425dc2c9882d60f700da6d936afdcde9a779aeae593c1d971ccb218e7dd525fa3141567e1a6de4a1bcc53c53cf0cd6bbb71eefcaee88abf2857aa69fc3f73452f0770d05f8e740442b8851518e97a6d045ca8984317ca621a7604acfba67740b6c0552abc06f2e12ed8fc2fc8a1fedfd69cd561ca1ace6b6a9f0e91a0b09ca85810b2076dc964df19ca6af9d26355b25c91c9a88ab932b366f7c921613ddd0357750f0e500ca96eba49de060cee74feb9cf7905f5877a8f52ad37a787944ba7ad817f7ae3628b199c3ab597d0f95bf05f9ae859fdacbc112fd6c8aa23fac56497542faac259fcd6d7f3a95ed3847916e0ca5a6b3bd694c74b2b857110c5698f61b0dccf64705d83f43fb0fe511132fb61412fa83dbe0fbd15c17702cb1f82acbea4bb1a64906e90f6571ff63d76d026935665a9cd773e9ab562b1bee08d6a39ef29b2b565f3c4fb9c64979b28773aa7162f92ec9c61876b3b36936a88ece91285a141710e3181315fa4aa1f8d78ff1e047a1baee747cc7e4692193c993ac8f684c9ae3e8fc6f94f26ed826bb34e9f613492a5fb648068745c9c3f4a266c09d94f19c516d9a0b5984eb45270d97768700573bc16b5ab6529bc74b67029616686965d0a9b1b329f02f89095376e7db403bc6db2d66b5d5c05532cfd2b94cd61bc9f32efc9675ecaec41f195817a0dcad4f1ab29cb9902f2a6130f3e450a0c4793aee9bfb0e8d84c3729bbf927000000ffff0300504b0304140006000800000021000dd1909fb60000001b010000270000007468656d652f7468656d652f5f72656c732f7468656d654d616e616765722e786d6c2e72656c73848f4d0ac2301484f78277086f6fd3ba109126dd88d0add40384e4350d363f2451eced0dae2c082e8761be9969bb979dc9136332de3168aa1a083ae995719ac16db8ec8e4052164e89d93b64b060828e6f37ed1567914b284d262452282e3198720e274a939cd08a54f980ae38a38f56e422a3a641c8bbd048f7757da0f19b017cc524bd62107bd5001996509affb3fd381a89672f1f165dfe514173d9850528a2c6cce0239baa4c04ca5bbabac4df000000ffff0300504b01022d0014000600080000002100e9de0fbfff0000001c0200001300000000000000000000000000000000005b436f6e74656e745f54797065735d2e786d6c504b01022d0014000600080000002100a5d6a7e7c0000000360100000b00000000000000000000000000300100005f72656c732f2e72656c73504b01022d00140006000800000021006b799616830000008a0000001c00000000000000000000000000190200007468656d652f7468656d652f7468656d654d616e616765722e786d6c504b01022d00140006000800000021009d5c8bbe10070000871d00001600000000000000000000000000d60200007468656d652f7468656d652f7468656d65312e786d6c504b01022d00140006000800000021000dd1909fb60000001b01000027000000000000000000000000001a0a00007468656d652f7468656d652f5f72656c732f7468656d654d616e616765722e786d6c2e72656c73504b050600000000050005005d010000150b00000000}{\*\colorschememapping 3c3f786d6c2076657273696f6e3d22312e302220656e636f64696e673d225554462d3822207374616e64616c6f6e653d22796573223f3e0d0a3c613a636c724d617020786d6c6e733a613d22687474703a2f2f736368656d61732e6f70656e786d6c666f726d6174732e6f72672f64726177696e676d6c2f323030362f6d61696e22206267313d226c743122207478313d22646b3122206267323d226c743222207478323d22646b322220616363656e74313d22616363656e74312220616363656e74323d22616363656e74322220616363656e74333d22616363656e74332220616363656e74343d22616363656e74342220616363656e74353d22616363656e74352220616363656e74363d22616363656e74362220686c696e6b3d22686c696e6b2220666f6c486c696e6b3d22666f6c486c696e6b222f3e}{\*\latentstyles\lsdstimax276\lsdlockeddef0\lsdsemihiddendef1\lsdunhideuseddef1\lsdqformatdef0\lsdprioritydef99{\lsdlockedexcept \lsdsemihidden0 \lsdunhideused0 \lsdqformat1 \lsdlocked0 Normal;\lsdsemihidden0 \lsdunhideused0 \lsdqformat1 \lsdpriority9 \lsdlocked0 heading 1;\lsdqformat1 \lsdpriority9 \lsdlocked0 heading 2;\lsdqformat1 \lsdpriority9 \lsdlocked0 heading 3;\lsdqformat1 \lsdpriority9 \lsdlocked0 heading 4;\lsdqformat1 \lsdpriority9 \lsdlocked0 heading 5;\lsdqformat1 \lsdpriority9 \lsdlocked0 heading 6;\lsdqformat1 \lsdpriority9 \lsdlocked0 heading 7;\lsdqformat1 \lsdpriority9 \lsdlocked0 heading 8;\lsdqformat1 \lsdpriority9 \lsdlocked0 heading 9;\lsdpriority39 \lsdlocked0 toc 1;\lsdpriority39 \lsdlocked0 toc 2;\lsdpriority39 \lsdlocked0 toc 3;\lsdpriority39 \lsdlocked0 toc 4;\lsdpriority39 \lsdlocked0 toc 5;\lsdpriority39 \lsdlocked0 toc 6;\lsdpriority39 \lsdlocked0 toc 7;\lsdpriority39 \lsdlocked0 toc 8;\lsdpriority39 \lsdlocked0 toc 9;\lsdunhideused0 \lsdlocked0 footer;\lsdqformat1 \lsdpriority35 \lsdlocked0 caption;\lsdsemihidden0 \lsdunhideused0 \lsdqformat1 \lsdpriority10 \lsdlocked0 Title;\lsdpriority1 \lsdlocked0 Default Paragraph Font;\lsdsemihidden0 \lsdunhideused0 \lsdqformat1 \lsdpriority11 \lsdlocked0 Subtitle;\lsdsemihidden0 \lsdunhideused0 \lsdqformat1 \lsdpriority22 \lsdlocked0 Strong;\lsdsemihidden0 \lsdunhideused0 \lsdqformat1 \lsdpriority20 \lsdlocked0 Emphasis;\lsdsemihidden0 \lsdunhideused0 \lsdpriority59 \lsdlocked0 Table Grid;\lsdunhideused0 \lsdlocked0 Placeholder Text;\lsdsemihidden0 \lsdunhideused0 \lsdqformat1 \lsdpriority1 \lsdlocked0 No Spacing;\lsdsemihidden0 \lsdunhideused0 \lsdpriority60 \lsdlocked0 Light Shading;\lsdsemihidden0 \lsdunhideused0 \lsdpriority61 \lsdlocked0 Light List;\lsdsemihidden0 \lsdunhideused0 \lsdpriority62 \lsdlocked0 Light Grid;\lsdsemihidden0 \lsdunhideused0 \lsdpriority63 \lsdlocked0 Medium Shading 1;\lsdsemihidden0 \lsdunhideused0 \lsdpriority64 \lsdlocked0 Medium Shading 2;\lsdsemihidden0 \lsdunhideused0 \lsdpriority65 \lsdlocked0 Medium List 1;\lsdsemihidden0 \lsdunhideused0 \lsdpriority66 \lsdlocked0 Medium List 2;\lsdsemihidden0 \lsdunhideused0 \lsdpriority67 \lsdlocked0 Medium Grid 1;\lsdsemihidden0 \lsdunhideused0 \lsdpriority68 \lsdlocked0 Medium Grid 2;\lsdsemihidden0 \lsdunhideused0 \lsdpriority69 \lsdlocked0 Medium Grid 3;\lsdsemihidden0 \lsdunhideused0 \lsdpriority70 \lsdlocked0 Dark List;\lsdsemihidden0 \lsdunhideused0 \lsdpriority71 \lsdlocked0 Colorful Shading;\lsdsemihidden0 \lsdunhideused0 \lsdpriority72 \lsdlocked0 Colorful List;\lsdsemihidden0 \lsdunhideused0 \lsdpriority73 \lsdlocked0 Colorful Grid;\lsdsemihidden0 \lsdunhideused0 \lsdpriority60 \lsdlocked0 Light Shading Accent 1;\lsdsemihidden0 \lsdunhideused0 \lsdpriority61 \lsdlocked0 Light List Accent 1;\lsdsemihidden0 \lsdunhideused0 \lsdpriority62 \lsdlocked0 Light Grid Accent 1;\lsdsemihidden0 \lsdunhideused0 \lsdpriority63 \lsdlocked0 Medium Shading 1 Accent 1;\lsdsemihidden0 \lsdunhideused0 \lsdpriority64 \lsdlocked0 Medium Shading 2 Accent 1;\lsdsemihidden0 \lsdunhideused0 \lsdpriority65 \lsdlocked0 Medium List 1 Accent 1;\lsdunhideused0 \lsdlocked0 Revision;\lsdsemihidden0 \lsdunhideused0 \lsdqformat1 \lsdpriority34 \lsdlocked0 List Paragraph;\lsdsemihidden0 \lsdunhideused0 \lsdqformat1 \lsdpriority29 \lsdlocked0 Quote;\lsdsemihidden0 \lsdunhideused0 \lsdqformat1 \lsdpriority30 \lsdlocked0 Intense Quote;\lsdsemihidden0 \lsdunhideused0 \lsdpriority66 \lsdlocked0 Medium List 2 Accent 1;\lsdsemihidden0 \lsdunhideused0 \lsdpriority67 \lsdlocked0 Medium Grid 1 Accent 1;\lsdsemihidden0 \lsdunhideused0 \lsdpriority68 \lsdlocked0 Medium Grid 2 Accent 1;\lsdsemihidden0 \lsdunhideused0 \lsdpriority69 \lsdlocked0 Medium Grid 3 Accent 1;\lsdsemihidden0 \lsdunhideused0 \lsdpriority70 \lsdlocked0 Dark List Accent 1;\lsdsemihidden0 \lsdunhideused0 \lsdpriority71 \lsdlocked0 Colorful Shading Accent 1;\lsdsemihidden0 \lsdunhideused0 \lsdpriority72 \lsdlocked0 Colorful List Accent 1;\lsdsemihidden0 \lsdunhideused0 \lsdpriority73 \lsdlocked0 Colorful Grid Accent 1;\lsdsemihidden0 \lsdunhideused0 \lsdpriority60 \lsdlocked0 Light Shading Accent 2;\lsdsemihidden0 \lsdunhideused0 \lsdpriority61 \lsdlocked0 Light List Accent 2;\lsdsemihidden0 \lsdunhideused0 \lsdpriority62 \lsdlocked0 Light Grid Accent 2;\lsdsemihidden0 \lsdunhideused0 \lsdpriority63 \lsdlocked0 Medium Shading 1 Accent 2;\lsdsemihidden0 \lsdunhideused0 \lsdpriority64 \lsdlocked0 Medium Shading 2 Accent 2;\lsdsemihidden0 \lsdunhideused0 \lsdpriority65 \lsdlocked0 Medium List 1 Accent 2;\lsdsemihidden0 \lsdunhideused0 \lsdpriority66 \lsdlocked0 Medium List 2 Accent 2;\lsdsemihidden0 \lsdunhideused0 \lsdpriority67 \lsdlocked0 Medium Grid 1 Accent 2;\lsdsemihidden0 \lsdunhideused0 \lsdpriority68 \lsdlocked0 Medium Grid 2 Accent 2;\lsdsemihidden0 \lsdunhideused0 \lsdpriority69 \lsdlocked0 Medium Grid 3 Accent 2;\lsdsemihidden0 \lsdunhideused0 \lsdpriority70 \lsdlocked0 Dark List Accent 2;\lsdsemihidden0 \lsdunhideused0 \lsdpriority71 \lsdlocked0 Colorful Shading Accent 2;\lsdsemihidden0 \lsdunhideused0 \lsdpriority72 \lsdlocked0 Colorful List Accent 2;\lsdsemihidden0 \lsdunhideused0 \lsdpriority73 \lsdlocked0 Colorful Grid Accent 2;\lsdsemihidden0 \lsdunhideused0 \lsdpriority60 \lsdlocked0 Light Shading Accent 3;\lsdsemihidden0 \lsdunhideused0 \lsdpriority61 \lsdlocked0 Light List Accent 3;\lsdsemihidden0 \lsdunhideused0 \lsdpriority62 \lsdlocked0 Light Grid Accent 3;\lsdsemihidden0 \lsdunhideused0 \lsdpriority63 \lsdlocked0 Medium Shading 1 Accent 3;\lsdsemihidden0 \lsdunhideused0 \lsdpriority64 \lsdlocked0 Medium Shading 2 Accent 3;\lsdsemihidden0 \lsdunhideused0 \lsdpriority65 \lsdlocked0 Medium List 1 Accent 3;\lsdsemihidden0 \lsdunhideused0 \lsdpriority66 \lsdlocked0 Medium List 2 Accent 3;\lsdsemihidden0 \lsdunhideused0 \lsdpriority67 \lsdlocked0 Medium Grid 1 Accent 3;\lsdsemihidden0 \lsdunhideused0 \lsdpriority68 \lsdlocked0 Medium Grid 2 Accent 3;\lsdsemihidden0 \lsdunhideused0 \lsdpriority69 \lsdlocked0 Medium Grid 3 Accent 3;\lsdsemihidden0 \lsdunhideused0 \lsdpriority70 \lsdlocked0 Dark List Accent 3;\lsdsemihidden0 \lsdunhideused0 \lsdpriority71 \lsdlocked0 Colorful Shading Accent 3;\lsdsemihidden0 \lsdunhideused0 \lsdpriority72 \lsdlocked0 Colorful List Accent 3;\lsdsemihidden0 \lsdunhideused0 \lsdpriority73 \lsdlocked0 Colorful Grid Accent 3;\lsdsemihidden0 \lsdunhideused0 \lsdpriority60 \lsdlocked0 Light Shading Accent 4;\lsdsemihidden0 \lsdunhideused0 \lsdpriority61 \lsdlocked0 Light List Accent 4;\lsdsemihidden0 \lsdunhideused0 \lsdpriority62 \lsdlocked0 Light Grid Accent 4;\lsdsemihidden0 \lsdunhideused0 \lsdpriority63 \lsdlocked0 Medium Shading 1 Accent 4;\lsdsemihidden0 \lsdunhideused0 \lsdpriority64 \lsdlocked0 Medium Shading 2 Accent 4;\lsdsemihidden0 \lsdunhideused0 \lsdpriority65 \lsdlocked0 Medium List 1 Accent 4;\lsdsemihidden0 \lsdunhideused0 \lsdpriority66 \lsdlocked0 Medium List 2 Accent 4;\lsdsemihidden0 \lsdunhideused0 \lsdpriority67 \lsdlocked0 Medium Grid 1 Accent 4;\lsdsemihidden0 \lsdunhideused0 \lsdpriority68 \lsdlocked0 Medium Grid 2 Accent 4;\lsdsemihidden0 \lsdunhideused0 \lsdpriority69 \lsdlocked0 Medium Grid 3 Accent 4;\lsdsemihidden0 \lsdunhideused0 \lsdpriority70 \lsdlocked0 Dark List Accent 4;\lsdsemihidden0 \lsdunhideused0 \lsdpriority71 \lsdlocked0 Colorful Shading Accent 4;\lsdsemihidden0 \lsdunhideused0 \lsdpriority72 \lsdlocked0 Colorful List Accent 4;\lsdsemihidden0 \lsdunhideused0 \lsdpriority73 \lsdlocked0 Colorful Grid Accent 4;\lsdsemihidden0 \lsdunhideused0 \lsdpriority60 \lsdlocked0 Light Shading Accent 5;\lsdsemihidden0 \lsdunhideused0 \lsdpriority61 \lsdlocked0 Light List Accent 5;\lsdsemihidden0 \lsdunhideused0 \lsdpriority62 \lsdlocked0 Light Grid Accent 5;\lsdsemihidden0 \lsdunhideused0 \lsdpriority63 \lsdlocked0 Medium Shading 1 Accent 5;\lsdsemihidden0 \lsdunhideused0 \lsdpriority64 \lsdlocked0 Medium Shading 2 Accent 5;\lsdsemihidden0 \lsdunhideused0 \lsdpriority65 \lsdlocked0 Medium List 1 Accent 5;\lsdsemihidden0 \lsdunhideused0 \lsdpriority66 \lsdlocked0 Medium List 2 Accent 5;\lsdsemihidden0 \lsdunhideused0 \lsdpriority67 \lsdlocked0 Medium Grid 1 Accent 5;\lsdsemihidden0 \lsdunhideused0 \lsdpriority68 \lsdlocked0 Medium Grid 2 Accent 5;\lsdsemihidden0 \lsdunhideused0 \lsdpriority69 \lsdlocked0 Medium Grid 3 Accent 5;\lsdsemihidden0 \lsdunhideused0 \lsdpriority70 \lsdlocked0 Dark List Accent 5;\lsdsemihidden0 \lsdunhideused0 \lsdpriority71 \lsdlocked0 Colorful Shading Accent 5;\lsdsemihidden0 \lsdunhideused0 \lsdpriority72 \lsdlocked0 Colorful List Accent 5;\lsdsemihidden0 \lsdunhideused0 \lsdpriority73 \lsdlocked0 Colorful Grid Accent 5;\lsdsemihidden0 \lsdunhideused0 \lsdpriority60 \lsdlocked0 Light Shading Accent 6;\lsdsemihidden0 \lsdunhideused0 \lsdpriority61 \lsdlocked0 Light List Accent 6;\lsdsemihidden0 \lsdunhideused0 \lsdpriority62 \lsdlocked0 Light Grid Accent 6;\lsdsemihidden0 \lsdunhideused0 \lsdpriority63 \lsdlocked0 Medium Shading 1 Accent 6;\lsdsemihidden0 \lsdunhideused0 \lsdpriority64 \lsdlocked0 Medium Shading 2 Accent 6;\lsdsemihidden0 \lsdunhideused0 \lsdpriority65 \lsdlocked0 Medium List 1 Accent 6;\lsdsemihidden0 \lsdunhideused0 \lsdpriority66 \lsdlocked0 Medium List 2 Accent 6;\lsdsemihidden0 \lsdunhideused0 \lsdpriority67 \lsdlocked0 Medium Grid 1 Accent 6;\lsdsemihidden0 \lsdunhideused0 \lsdpriority68 \lsdlocked0 Medium Grid 2 Accent 6;\lsdsemihidden0 \lsdunhideused0 \lsdpriority69 \lsdlocked0 Medium Grid 3 Accent 6;\lsdsemihidden0 \lsdunhideused0 \lsdpriority70 \lsdlocked0 Dark List Accent 6;\lsdsemihidden0 \lsdunhideused0 \lsdpriority71 \lsdlocked0 Colorful Shading Accent 6;\lsdsemihidden0 \lsdunhideused0 \lsdpriority72 \lsdlocked0 Colorful List Accent 6;\lsdsemihidden0 \lsdunhideused0 \lsdpriority73 \lsdlocked0 Colorful Grid Accent 6;\lsdsemihidden0 \lsdunhideused0 \lsdqformat1 \lsdpriority19 \lsdlocked0 Subtle Emphasis;\lsdsemihidden0 \lsdunhideused0 \lsdqformat1 \lsdpriority21 \lsdlocked0 Intense Emphasis;\lsdsemihidden0 \lsdunhideused0 \lsdqformat1 \lsdpriority31 \lsdlocked0 Subtle Reference;\lsdsemihidden0 \lsdunhideused0 \lsdqformat1 \lsdpriority32 \lsdlocked0 Intense Reference;\lsdsemihidden0 \lsdunhideused0 \lsdqformat1 \lsdpriority33 \lsdlocked0 Book Title;\lsdpriority37 \lsdlocked0 Bibliography;\lsdqformat1 \lsdpriority39 \lsdlocked0 TOC Heading;}}{\*\datastore 010001000200000010000000584d4c2e5341585265616465722e3500000000000000000000060000d0cf11e0a1b11ae1000000000000000000000000000000003e000300feff090006000000000000000000000001000000010000000000000000100000feffffff00000000feffffff0000000000000000fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffdfffffffeffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff5200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000500ffffffffffffffffffffffffec69d9888b8b3d4c859eaf6cd158be0f0000000000000000000000009b5dc9479c9dc801feffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100010000000000}}